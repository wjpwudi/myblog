<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="Hexo Theme Redefine">
    
    <meta name="author" content="清风煮酒">
    <!-- preconnect -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://evan.beee.top" crossorigin>
    
    <!--- Seo Part-->
    
    <link rel="canonical" href="http://yonina.space/2023/08/24/ssm整合/"/>
    <meta name="robots" content="index,follow">
    <meta name="googlebot" content="index,follow">
    <meta name="revisit-after" content="1 days">
    
        <meta name="description" content="1.创建工程2.ssm整合  Spring SpringConfig   Mybatis MybatisConfig JdbcConfig jdbc.properties   SpringMVC ServletConfig SpringMvcConfig    3.功能模块  表与实体类- dao（接口+自动代理) service(接口+实现类) 业务层接口测试（整合JUnit )   contr">
<meta property="og:type" content="article">
<meta property="og:title" content="SSM整合">
<meta property="og:url" content="http://yonina.space/2023/08/24/SSM%E6%95%B4%E5%90%88/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="1.创建工程2.ssm整合  Spring SpringConfig   Mybatis MybatisConfig JdbcConfig jdbc.properties   SpringMVC ServletConfig SpringMvcConfig    3.功能模块  表与实体类- dao（接口+自动代理) service(接口+实现类) 业务层接口测试（整合JUnit )   contr">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/34895783/1677121833451-bbcd4063-6868-47ec-99ba-4547178497a7.png#averageHue=%23f9f5ec&clientId=u1270777f-a908-4&from=paste&id=uc1c9b3d0&originHeight=246&originWidth=491&originalType=url&ratio=1.25&rotation=0&showTitle=false&size=63870&status=done&style=none&taskId=u96ad9750-cc57-4679-9369-b788aa466f5&title=">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/34895783/1677121833364-2e408a80-57be-4476-bb2f-dbc9611c248d.png#averageHue=%23f9f4ec&clientId=u1270777f-a908-4&from=paste&id=u8f8d32ea&originHeight=255&originWidth=557&originalType=url&ratio=1.25&rotation=0&showTitle=false&size=77801&status=done&style=none&taskId=ucc757256-698e-4447-adfb-4c3141e6375&title=">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/34895783/1677121833810-a1a9babb-65fd-4b91-b924-b65198512cab.png#averageHue=%23f9f8ef&clientId=u1270777f-a908-4&from=paste&id=uedb639b4&originHeight=456&originWidth=904&originalType=url&ratio=1.25&rotation=0&showTitle=false&size=250115&status=done&style=none&taskId=u45b97f99-da9d-4307-b626-718becd94cd&title=">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/34895783/1677121833305-892dccc5-ac3a-42dc-9ecf-7f97b1884a83.png#averageHue=%23faf9ef&clientId=u1270777f-a908-4&from=paste&id=u7ece3535&originHeight=359&originWidth=619&originalType=url&ratio=1.25&rotation=0&showTitle=false&size=80557&status=done&style=none&taskId=u7eb5c1b2-c386-4b71-8701-eccf646a087&title=">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/34895783/1677121833327-3172e910-1569-411f-8605-7869dab9258c.png#averageHue=%23faf9ec&clientId=u1270777f-a908-4&from=paste&id=ue8e5a7ac&originHeight=116&originWidth=640&originalType=url&ratio=1.25&rotation=0&showTitle=false&size=44682&status=done&style=none&taskId=ubf4aa400-059f-42a5-954d-59475b3f281&title=">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/34895783/1677121834829-732731c2-f6f7-4127-8536-90b5fe23c8c2.png#averageHue=%23f9f7f1&clientId=u1270777f-a908-4&from=paste&id=u7900d13e&originHeight=295&originWidth=639&originalType=url&ratio=1.25&rotation=0&showTitle=false&size=79720&status=done&style=none&taskId=ua57507e7-b67c-4d19-89c3-95f83b43dff&title=">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/34895783/1677121834837-f142db38-2471-4604-b6b4-8dc4006b9628.png#averageHue=%23f9f7f0&clientId=u1270777f-a908-4&from=paste&id=ubf390daa&originHeight=285&originWidth=585&originalType=url&ratio=1.25&rotation=0&showTitle=false&size=70300&status=done&style=none&taskId=u4e391cb8-5599-4896-91fb-252cdd3cf63&title=">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/34895783/1677121834879-0f47e166-2fd5-41f2-a1cb-b4d7086df74e.png#averageHue=%23faf8f0&clientId=u1270777f-a908-4&from=paste&id=u0c43cd5a&originHeight=285&originWidth=641&originalType=url&ratio=1.25&rotation=0&showTitle=false&size=74209&status=done&style=none&taskId=u94900272-6a45-4863-bcea-3585726b17d&title=">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/34895783/1678673426568-cace7064-d4be-4719-83ef-381d90e7a690.png#averageHue=%23f2e3e0&clientId=u62bbec2a-5fc6-4&from=ui&id=u69ab12fe&originHeight=587&originWidth=1058&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=94143&status=done&style=none&taskId=ub0770b78-9c9b-480a-81ef-d4adaf6d8e3&title=">
<meta property="og:image" content="https://img-blog.csdnimg.cn/ee826bb9090f4eb4bd733cafff6f7767.png#id=cvjaj&originHeight=246&originWidth=491&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=">
<meta property="og:image" content="https://img-blog.csdnimg.cn/9718ef925d4c4e91bddb92d6352aad93.png#id=vO6TU&originHeight=255&originWidth=557&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=">
<meta property="og:image" content="https://img-blog.csdnimg.cn/6c67dfb6b5c24939ac8f38aa58956153.png#id=fXIRK&originHeight=456&originWidth=904&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=">
<meta property="og:image" content="https://img-blog.csdnimg.cn/6d60df1dac3e4926921bb7ed11a42eef.png#id=wDm9u&originHeight=359&originWidth=619&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=">
<meta property="og:image" content="https://img-blog.csdnimg.cn/95476e0488a64a9d8afc17e023a7c245.png#id=icTdQ&originHeight=116&originWidth=640&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=">
<meta property="og:image" content="https://img-blog.csdnimg.cn/81e48df61ce045279aa6eb8f274b4e24.png#id=POdeM&originHeight=295&originWidth=639&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=">
<meta property="og:image" content="https://img-blog.csdnimg.cn/1bf08c621f8b413093807cda91cabbde.png#id=VhN5D&originHeight=285&originWidth=585&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=">
<meta property="og:image" content="https://img-blog.csdnimg.cn/e4354ac81e0e48238b5dcd9f9ad91c87.png#id=KuJqk&originHeight=285&originWidth=641&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=">
<meta property="article:published_time" content="2023-08-24T09:14:12.261Z">
<meta property="article:modified_time" content="2023-08-24T09:14:04.478Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="SSM整合">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.nlark.com/yuque/0/2023/png/34895783/1677121833451-bbcd4063-6868-47ec-99ba-4547178497a7.png#averageHue=%23f9f5ec&clientId=u1270777f-a908-4&from=paste&id=uc1c9b3d0&originHeight=246&originWidth=491&originalType=url&ratio=1.25&rotation=0&showTitle=false&size=63870&status=done&style=none&taskId=u96ad9750-cc57-4679-9369-b788aa466f5&title=">
    
    <!--- Icon Part-->
    <link rel="icon" type="image/png" href="/images/lm.png" sizes="192x192">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/lm.png">
    <meta name="theme-color" content="#A31F34">
    <link rel="shortcut icon" href="/images/lm.png">
    <!--- Page Info-->
    
    <title>
        
            SSM整合 -
        
        清风煮酒
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    
<link rel="stylesheet" href="/assets/fonts.css">

    <!--- Font Part-->
    
    
    
    

    <!--- Inject Part-->
    
    <script id="hexo-configurations">
    let Global = window.Global || {};
    Global.hexo_config = {"hostname":"yonina.space","root":"/","language":"en"};
    Global.theme_config = {"articles":{"style":{"font_size":"16px","line_height":1.5,"image_border_radius":"14px","image_alignment":"center","image_caption":false,"link_icon":true},"word_count":{"enable":true,"count":true,"min2read":true},"author_label":{"enable":true,"auto":false,"list":[""]},"code_block":{"copy":true,"style":"mac","font":{"enable":false,"family":null,"url":null}},"toc":{"enable":true,"max_depth":3,"number":false,"expand":true,"init_open":true},"copyright":true,"lazyload":true,"recommendation":{"enable":false,"title":"推荐阅读","limit":3,"placeholder":"/images/wallhaven-wqery6-light.webp","skip_dirs":[]}},"colors":{"primary":"#A31F34","secondary":null},"global":{"fonts":{"chinese":{"enable":false,"family":null,"url":null},"english":{"enable":false,"family":null,"url":null}},"content_max_width":"1000px","sidebar_width":"210px","hover":{"shadow":true,"scale":false},"scroll_progress":{"bar":true,"percentage":true},"busuanzi_counter":{"enable":true,"site_pv":true,"site_uv":true,"post_pv":true},"pjax":true,"open_graph":true},"home_banner":{"enable":true,"image":{"light":"https://i.hd-r.cn/18a445cb91f22f6086a9393f719fba17.jpg","dark":"https://i.hd-r.cn/18a445cb91f22f6086a9393f719fba17.jpg"},"title":"welcome to 子羽 and Yonina's Family","subtitle":{"text":["我坚信，失败后的第一个黎明，就是争取胜利的新开始.","忘掉失败，不过要牢记失败中的教训.","我怕输，所以我从不敢放弃.","奋斗吧，改变不了起点但可以改变终点.","不是井里没有水，而是挖的不够深。不是成功来得慢，而是努力的不够狠.","不管梦想是什么，只有带着淡然的态度，做好当前的事情，才能如愿以偿.","抬头与低头，是人生的两种姿态。抬头需要底气，低头需要勇气","当你感觉到难的时候，就是你在进步的时候；机械、重复的工作是最低效的成长；而逼自己去做难的事，你没干过的事，就能大大提升你的潜力","人的一生不可能一帆风顺,而正是由于有了一些困难和挫折,我们的人 生才会有意义"],"hitokoto":{"enable":false,"api":"https://v1.hitokoto.cn"},"typing_speed":100,"backing_speed":80,"starting_delay":500,"backing_delay":1500,"loop":true,"smart_backspace":true},"text_color":{"light":"#fff","dark":"#d1d1b6"},"text_style":{"title_size":"2.8rem","subtitle_size":"1.5rem","line_height":1.2},"custom_font":{"enable":false,"family":null,"url":null},"social_links":{"enable":true,"links":{"github":"https://github.com/wjpwudi/blog","instagram":null,"zhihu":null,"twitter":null,"email":"2806109090@qq.com# your email","YUQUE":"https://www.yuque.com/wangjinpeng-jlws0/dyk7c7"}},"style":"static"},"plugins":{"feed":{"enable":false},"aplayer":{"enable":false,"type":"fixed","audios":[{"name":null,"artist":null,"url":null,"cover":null}]},"mermaid":{"enable":false,"version":"9.3.0"}},"version":"2.1.2","navbar":{"auto_hide":false,"color":{"left":"#f78736","right":"#367df7","transparency":30},"links":{"Home":{"path":"/","icon":"fa-regular fa-house"},"分类":{"path":"/categories/","icon":"fa-solid fa-robot"},"标签":{"path":"/tags/","icon":"fa-duotone fa-book"},"友链":{"path":"/links/","icon":"fa-solid fa-link"},"关于":{"icon":"fa-regular fa-user","submenus":{"Me":"/about","Github":"https://github.com/wjpwudi/blog","Gitee":"https://gitee.com/wjpwudi/myblog","Yuque":"https://www.yuque.com/wangjinpeng-jlws0/dyk7c7"}}},"search":{"enable":false,"preload":true},"tags":{"Tags":{"icon":"fa-solid fa-tags","path":"/tags/"}},"categories":{"Categories":{"icon":"fa-solid fa-folder","path":"/categories/"}}},"page_templates":{"friends_column":2,"tags_style":"blur"},"home":{"sidebar":{"enable":true,"position":"left","first_item":"menu","announcement":null,"links":null},"article_date_format":"auto","categories":{"enable":true,"limit":3},"tags":{"enable":true,"limit":3}}};
    Global.language_ago = {"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days ago","week":"%s weeks ago","month":"%s months ago","year":"%s years ago"};
  </script>
    
    <!--- Fontawesome Part-->
    
<link rel="stylesheet" href="/fontawesome/fontawesome.min.css">

    
<link rel="stylesheet" href="/fontawesome/brands.min.css">

    
<link rel="stylesheet" href="/fontawesome/solid.min.css">

    
<link rel="stylesheet" href="/fontawesome/regular.min.css">

    
    
    
    
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
<div class="progress-bar-container">
    
        <span class="scroll-progress-bar"></span>
    

    
        <span class="pjax-progress-bar"></span>
        <span class="pjax-progress-icon">
            <i class="fa-solid fa-circle-notch fa-spin"></i>
        </span>
    
</div>


<main class="page-container">

    

    <div class="main-content-container">

        <div class="main-content-header">
            <header class="navbar-container">
    
    <div class="navbar-content">
        <div class="left">
            
            <a class="logo-title" href="/">
                
                清风煮酒
                
            </a>
        </div>

        <div class="right">
            <!-- PC -->
            <div class="desktop">
                <ul class="navbar-list">
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/"  >
                                    
                                        
                                            <i class="fa-regular fa-house"></i>
                                        
                                        HOME
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/categories/"  >
                                    
                                        
                                            <i class="fa-solid fa-robot"></i>
                                        
                                        分类
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/tags/"  >
                                    
                                        
                                            <i class="fa-duotone fa-book"></i>
                                        
                                        标签
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/links/"  >
                                    
                                        
                                            <i class="fa-solid fa-link"></i>
                                        
                                        友链
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="has-dropdown" 
                                    href="#" onClick="return false;">
                                    
                                        
                                            <i class="fa-regular fa-user"></i>
                                        
                                        关于&nbsp;<i class="fa-solid fa-chevron-down"></i>
                                    
                                </a>
                                <!-- Submenu -->
                                
                                    <ul class="sub-menu">
                                    
                                        <li>
                                        <a href="/about">ME
                                        </a>
                                        </li>
                                    
                                        <li>
                                        <a target="_blank" rel="noopener" href="https://github.com/wjpwudi/blog">GITHUB
                                        </a>
                                        </li>
                                    
                                        <li>
                                        <a target="_blank" rel="noopener" href="https://gitee.com/wjpwudi/myblog">GITEE
                                        </a>
                                        </li>
                                    
                                        <li>
                                        <a target="_blank" rel="noopener" href="https://www.yuque.com/wangjinpeng-jlws0/dyk7c7">YUQUE
                                        </a>
                                        </li>
                                    
                                    </ul>
                                
                            </li>
                    
                    
                </ul>
            </div>
            <!-- Mobile -->
            <div class="mobile">
                
                <div class="icon-item navbar-bar">
                    <div class="navbar-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile drawer -->
    <div class="navbar-drawer">
        <ul class="drawer-navbar-list">
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="" 
                        href="/"  >
                             
                                
                                    <i class="fa-regular fa-house"></i>
                                
                                HOME
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="" 
                        href="/categories/"  >
                             
                                
                                    <i class="fa-solid fa-robot"></i>
                                
                                分类
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="" 
                        href="/tags/"  >
                             
                                
                                    <i class="fa-duotone fa-book"></i>
                                
                                标签
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="" 
                        href="/links/"  >
                             
                                
                                    <i class="fa-solid fa-link"></i>
                                
                                友链
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="has-dropdown" 
                        href="#" onClick="return false;">
                            
                                
                                    <i class="fa-regular fa-user"></i>
                                
                                关于&nbsp;<i class="fa-solid fa-chevron-down"></i>
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                              
                        
                            <li class="dropdown-item flex-center">
                                <a class="dropdown-item" href="/about">ME</a>
                            </li>
                        
                            <li class="dropdown-item flex-center">
                                <a class="dropdown-item" target="_blank" rel="noopener" href="https://github.com/wjpwudi/blog">GITHUB</a>
                            </li>
                        
                            <li class="dropdown-item flex-center">
                                <a class="dropdown-item" target="_blank" rel="noopener" href="https://gitee.com/wjpwudi/myblog">GITEE</a>
                            </li>
                        
                            <li class="dropdown-item flex-center">
                                <a class="dropdown-item" target="_blank" rel="noopener" href="https://www.yuque.com/wangjinpeng-jlws0/dyk7c7">YUQUE</a>
                            </li>
                        
                    
            

        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="main-content-body">

            

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="post-page-container">
        <div class="article-content-container">

            
            
                <div class="article-title">
                    <h1 class="article-title-regular">SSM整合</h1>
                </div>
            
                
            

            
                <div class="article-header">
                    <div class="avatar">
                        <img src="https://img2.baidu.com/it/u=3556369831,3766649660&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=499">
                    </div>
                    <div class="info">
                        <div class="author">
                            <span class="name">清风煮酒</span>
                            
                                <span class="author-label"></span>
                            
                        </div>
                        <div class="meta-info">
                            <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fa-regular fa-pen-fancy"></i>&nbsp;
        <span class="desktop">2023-08-24 17:14:12</span>
        <span class="mobile">2023-08-24 17:14</span>
        <span class="hover-info">Created</span>
    </span>
    
        <span class="article-date article-meta-item">
            <i class="fa-regular fa-wrench"></i>&nbsp;
            <span class="desktop">2023-08-24 17:14:04</span>
            <span class="mobile">2023-08-24 17:14</span>
            <span class="hover-info">Updated</span>
        </span>
    

    
        <span class="article-categories article-meta-item">
            <i class="fa-regular fa-folders"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/categories/spring/">spring</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fa-regular fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/SSM%E6%95%B4%E5%90%88/">SSM整合</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
    
    
        <span class="article-pv article-meta-item">
            <i class="fa-regular fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                        </div>
                    </div>
                </div>
            

            <div class="article-content markdown-body">
                <p>1.创建工程<br>2.ssm整合</p>
<ul>
<li><strong>Spring</strong><ul>
<li><strong>SpringConfig</strong></li>
</ul>
</li>
<li><strong>Mybatis</strong><ul>
<li><strong>MybatisConfig</strong></li>
<li><strong>JdbcConfig</strong></li>
<li><strong>jdbc.properties</strong></li>
</ul>
</li>
<li><strong>SpringMVC</strong><ul>
<li><strong>ServletConfig</strong></li>
<li><strong>SpringMvcConfig</strong></li>
</ul>
</li>
</ul>
<p>3.功能模块</p>
<ul>
<li>表与实体类-</li>
<li>dao（接口+自动代理)</li>
<li>service(接口+实现类)<ul>
<li>业务层接口测试（整合JUnit )</li>
</ul>
</li>
<li>controller<ul>
<li>表现层接口测试( PostMan )</li>
</ul>
</li>
</ul>
<h1 id="一、MyBatis"><a href="#一、MyBatis" class="headerlink" title="一、MyBatis"></a>一、MyBatis</h1><h4 id="2-1创建MyBatis的映射文件"><a href="#2-1创建MyBatis的映射文件" class="headerlink" title="2.1创建MyBatis的映射文件"></a>2.1创建MyBatis的映射文件</h4><p>相关概念:<strong>ORM</strong> (Object Relationship Mapping）对象关系映射。</p>
<ul>
<li>对象:Java的实体类对象</li>
<li>关系:关系型数据库</li>
<li>映射:二者之间的对应关系</li>
</ul>
<p>1、映射文件的命名规则:表所对应的实体类的类名+Mapper.xml	例如: 表t_user，映射的实体类为User，所对应的映射文件为UserMapper.xml因此一个映射文件对应一个实体类，对应一张表的操作MyBatis映射文件用于编写SQL，访问以及操作表中的数据MyBatis映射文件存放的位置是src&#x2F;main&#x2F;resources&#x2F;mappers目录下<br>2、MyBatis中可以面向接口操作数据，要保证两个—致:<br>a&gt; mapper接口的全类名和映射文件的命名空间(namespace)保持—致<br>b&gt; mapper接口中方法的方法名和映射文件中编写SQL的标签的id属性保持—致</p>
<h3 id="5、MyBatis获取参数值的两种方式"><a href="#5、MyBatis获取参数值的两种方式" class="headerlink" title="5、MyBatis获取参数值的两种方式"></a>5、MyBatis获取参数值的两种方式</h3><p>MyBatis获取参数值的两种方式: ${} 和 #{}<br>${}的本质就是字符串拼接，**#{}的本质就是占位符赋值**<br>${}使用字符串拼接的方式拼接sql，若为字符串类型或日期类型的字段进行赋值时，需要手动加单引号;但是#{}使用占位符赋值的方式拼接sql，此时为字符串类型或日期类型的字段进行赋值时，可以自动添加单引号</p>
<h4 id="5-1、单个字面量类型的参数"><a href="#5-1、单个字面量类型的参数" class="headerlink" title="5.1、单个字面量类型的参数"></a>5.1、单个字面量类型的参数</h4><p>若mapper接口中的方法参数为单个的字面量类型此时可以使用 ${} 和 #{} 以任意的名称获取参数的值，注意 ${}需要手动加单引号</p>
<h4 id="5-2、多个字面量类型的参数"><a href="#5-2、多个字面量类型的参数" class="headerlink" title="5.2、多个字面量类型的参数"></a>5.2、多个字面量类型的参数</h4><p>若mapper接口中的方法参数为多个时此时MyBatis会自动将这些参数放在一个map集合中，以arg0,arg1…为键，以参数为值;以param1,param2..为键，以参数为值;因此只需要通过${} 和 #{} 访问map集合的键就可以获取相对应的值，注意${}需要手动加单引号</p>
<h3 id="6特殊SQL的执行"><a href="#6特殊SQL的执行" class="headerlink" title="6特殊SQL的执行"></a>6特殊SQL的执行</h3><h4 id="6-1-、模糊查询"><a href="#6-1-、模糊查询" class="headerlink" title="6.1 、模糊查询"></a>6.1 、模糊查询</h4><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--select * from t_user where username like &#x27;%$&#123;mohu&#125;%&#x27;--&gt;</span><br><span class="line"> &lt;!--select * from t_user where username like concat(&#x27;%&#x27;,#&#123;mohu&#125;,&#x27;%&#x27;)--&gt;</span><br><span class="line"> select * from t_user where usernamer like &quot;%&quot;#&#123;mohu&#125;&quot;%&quot;</span><br></pre></td></tr></table></figure></div>
<h3 id="7-删除操作"><a href="#7-删除操作" class="headerlink" title="7 删除操作"></a>7 删除操作</h3><p>DELETE FROM t_user WHERE id &#x3D; 5 OR id &#x3D; 6;<br>DELETE FROM t_user WHERE id lN (7,8);<br> delete from t_user where id in(${ids})</p>
<h4 id="7-1-动态设置表名"><a href="#7-1-动态设置表名" class="headerlink" title="7.1 动态设置表名"></a>7.1 动态设置表名</h4><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/☆☆</span><br><span class="line"> 动态设置表名，查询所有的用户信息☆</span><br><span class="line">  @param tableName</span><br><span class="line">  @return</span><br><span class="line"> */</span><br><span class="line"> List&lt;User&gt; getA11user (@Param( &quot;tableName&quot;) string tableName);</span><br></pre></td></tr></table></figure></div>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--List&lt;User&gt; getAlluser(@Par am(&quot;tableName&quot;) string tableName);--&gt;</span><br><span class="line"> &lt;select id=&quot;getA11user&quot; resultType=&quot;user&quot;&gt;</span><br><span class="line">     select * from $&#123;tab1eName&#125;</span><br><span class="line"> &lt;/select&gt;</span><br></pre></td></tr></table></figure></div>
<h4 id="7-2、添加功能获取自增的主键"><a href="#7-2、添加功能获取自增的主键" class="headerlink" title="7.2、添加功能获取自增的主键"></a>7.2、添加功能获取自增的主键</h4><p>场景模拟:t_clazz(clazz_id,clazz_name)t_student(student_id,student_name,clazz_id)<br>1、添加班级信息2、获取新添加的班级的id3、为班级分配学生，即将某学的班级id修改为新添加的班级的id<br>int insertUser(User user)</p>
<h3 id="8、自定义映射resultMap"><a href="#8、自定义映射resultMap" class="headerlink" title="8、自定义映射resultMap"></a>8、自定义映射resultMap</h3><h4 id="8-1、resultMap处理字段和属性的映射关系"><a href="#8-1、resultMap处理字段和属性的映射关系" class="headerlink" title="8.1、resultMap处理字段和属性的映射关系"></a>8.1、resultMap处理字段和属性的映射关系</h4><pre><code>    若字段名和实体类中的属性名不一致，则可以通过resultMap设置自定义映射
</code></pre>
<h4 id="8-2-多对一映射处理"><a href="#8-2-多对一映射处理" class="headerlink" title="8.2 多对一映射处理"></a>8.2 多对一映射处理</h4><h5 id="8-2-1、级联方式处理映射关系"><a href="#8-2-1、级联方式处理映射关系" class="headerlink" title="8.2.1、级联方式处理映射关系"></a>8.2.1、级联方式处理映射关系</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;resultMap id=&quot;empDeptMap&quot; type=&quot;Emp&quot;&gt;</span><br><span class="line">   &lt;id column=&quot;eid&quot; property=&quot;eid&quot;&gt;&lt;/id&gt;</span><br><span class="line">   &lt;result column=&quot;ename&quot; property=&quot;ename &quot;&gt;&lt;/result&gt;</span><br><span class="line">   &lt;result column=&quot;age&quot; property=&quot;age&quot;&gt;&lt;/result&gt;</span><br><span class="line">   &lt;result column=&quot;sex&quot; property=&quot;sex&quot;&gt;&lt;/result&gt;</span><br><span class="line">   &lt;result column=&quot;did&quot; property=&quot;dept.did&quot;&gt;&lt;/result&gt;</span><br><span class="line">   &lt;result column=&quot;dname&quot; property=&quot;dept.dname&quot;&gt;&lt;/result&gt;</span><br><span class="line"> &lt;/resultMap&gt;</span><br><span class="line"> &lt;!--Emp getEmpAndDeptByEid(@Par am(&quot;eid&quot;) int eid); --&gt;</span><br><span class="line">   &lt;select id=&quot;getEmpAndDeptByEid&quot; resultMap=&quot;empDeptMap&quot;&gt;</span><br><span class="line">     select emp.* , dept.* from t_emp emp left join t_dept dept on emp.did = dept.did whereemp.eid = #&#123;eid&#125;</span><br><span class="line"> &lt;/select&gt;</span><br></pre></td></tr></table></figure></div>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">select</span><br><span class="line"> t_emp.*,t_dept.*</span><br><span class="line"> from t_emp</span><br><span class="line"> left join t_dept</span><br><span class="line"> on t_emp.dept_id = t_dept.dept_id</span><br><span class="line"> where t_emp.emp_id = #&#123;empId&#125;</span><br></pre></td></tr></table></figure></div>
<h3 id="9-SQL动态查询"><a href="#9-SQL动态查询" class="headerlink" title="9 SQL动态查询"></a>9 SQL动态查询</h3><p>动态SQL查询</p>
<h4 id="1，if"><a href="#1，if" class="headerlink" title="1，if"></a>1，if</h4><p>通过test属性中的表达式判断标签中的内容是否有效（是否会拼接到sql中)</p>
<h4 id="2-where"><a href="#2-where" class="headerlink" title="2 . where"></a>2 . where</h4><p>a.若where标签中有条件成立，会自动生成where关键字 b.会自动将where标签中内容前多余的and去掉，但是其中内容后多余的and无法去掉 c.若where标签中没有任何一个条件成立，则where没有任何功能</p>
<h4 id="3-trim"><a href="#3-trim" class="headerlink" title="3.trim"></a>3.trim</h4><p>prefix，suffix:在标签中内容前面或后面添加指定内容 prefixoverrides. suffixoverrides:在标签中内容前面或后面去掉指定内容</p>
<h4 id="4、choose-when-otherwise"><a href="#4、choose-when-otherwise" class="headerlink" title="4、choose. when. otherwise"></a>4、choose. when. otherwise</h4><p>相当于java中的if…else if…else when至少设置一个,otherwise最多设置一个</p>
<h4 id="5-foreach"><a href="#5-foreach" class="headerlink" title="5.foreach"></a>5.foreach</h4><p>collection:设置要循环的数组或集合 item:用一个字符串表示数组或集合中的每一个数据 separator:设置每次循环的数据之间的分隔符 open:循环的所有内容以什么开始 close：循环的所有内容以什么结束</p>
<h4 id="6、sql片段"><a href="#6、sql片段" class="headerlink" title="6、sql片段"></a>6、sql片段</h4><p>可以记录一段sql ，再需要用的地方使用include标签进行引用</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;sql id=&quot;empColumns&quot;&gt;</span><br><span class="line">   emp_id,emp_name,age,gender,dept_id</span><br><span class="line"> &lt;/sql&gt;</span><br><span class="line"> &lt;include refid=&quot;empColums&quot;&gt;&lt;/include&gt;</span><br></pre></td></tr></table></figure></div>
<h3 id="10-MyBatis的缓存"><a href="#10-MyBatis的缓存" class="headerlink" title="10 MyBatis的缓存"></a>10 MyBatis的缓存</h3><h4 id="10-1-MyBatis的一级缓存"><a href="#10-1-MyBatis的一级缓存" class="headerlink" title="10.1 MyBatis的一级缓存"></a>10.1 MyBatis的一级缓存</h4><pre><code>—级缓存是SqlSession级别的，通过同一个SqlSession查询的数据会被缓存，下次查询相同的数据，就会从缓存中直接获取，不会从数据库重新访问使—级缓存失效的四种情况:1)不同的SqlSession对应不同的—级缓存
</code></pre>
<p>2)同一个SqlSession但是查询条件不同<br>3)同一个SqlSession两次查询期间执行了任何一次增删改操作<br>4)同一个SqlSession两次查询期间手动清空了缓存</p>
<h4 id="10-2-MyBstis的二级缓存"><a href="#10-2-MyBstis的二级缓存" class="headerlink" title="10.2 MyBstis的二级缓存"></a>10.2 MyBstis的二级缓存</h4><pre><code>二级缓存是SqlSessionFactory级别，通过同一个SqlSessionFactory创建的SqlSession查询的结果会被缓存;此后若再次执行相同的查询语句，结果就会从缓存中获取
</code></pre>
<p>二级缓存开启的条件:a&gt;在核心配置文件中，设置全局配置属性ca<br>cheEnabled&#x3D;”true”，默认为true，不需要设置b&gt;在映射文件中设置标签<cache/><br>c&gt;二级缓存必须在SqlSession关闭或提交之后有效d&gt;查询的数据所转换的实体类类型必须实现序列化的接口<br>使二级缓存失效的情况:两次查询之间执行了任意的增删改，会使—级和二级缓存同时失效</p>
<h4 id="10-3二级缓存的相关配置"><a href="#10-3二级缓存的相关配置" class="headerlink" title="10.3二级缓存的相关配置"></a>10.3二级缓存的相关配置</h4><p>①eviction属性: 缓存回收策略，默认的是 LRU。LRU(Least Recently Used)-最近最少使用的:移除最长时间不被使用的对象。FIFO (First in First out)-先进先出:按对象进入缓存的顺序来移除它们。SOFT-软引用:移除基于垃圾回收器状态和软引用规则的对象。WEAK-弱引用:更积极地移除基于垃圾收集器状态和弱引用规则的对象。<br>②flushInterval属性:刷新间隔，单位毫秒默认情况是不设置，也就是没有刷新间隔，缓存仅仅调用语句时刷新<br>③size属性:引用数目，正整数代表缓存最多可以存储多少个对象，太大容易导致内存溢出<br>④readOnly属性:只读, true&#x2F;falsetrue:只读缓存;会给所有调用者返回缓存对象的相同实例。因此这些对象不能被修改。这提供了很重要的性能优势。false:读写缓存;会返回缓存对象的拷贝（通过序列化)。这会慢一些，但是安全，因此默认是false。</p>
<h4 id="10-4、MyBatis缓存查询的顺序"><a href="#10-4、MyBatis缓存查询的顺序" class="headerlink" title="10.4、MyBatis缓存查询的顺序"></a>10.4、MyBatis缓存查询的顺序</h4><p>先查询二级缓存，因为二级缓存中可能会有其他程序已经查出来的数据，可以拿来直接使用。<br>如果二级缓存没有命中，再查询—级缓存如果一级缓存也没有命中，则查询数据库SqlSession关闭之后，一级缓存中的数据会写入二级缓存<br>二级缓存可以使用第三方缓存</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--Mybatis EHCache整合包--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">		&lt;groupId&gt;org.mybatis.caches&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;mybatis-ehcache&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.2.1&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;!--sLf4j日志门面的一个具体实现--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">	&lt;grouprd&gt;ch.qos.logback&lt;/groupd&gt;</span><br><span class="line">  &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;</span><br><span class="line">  &lt;version&gt;1.2.3&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure></div>
<h3 id="11、MyBatis的逆向工程"><a href="#11、MyBatis的逆向工程" class="headerlink" title="11、MyBatis的逆向工程"></a>11、MyBatis的逆向工程</h3><p>正向工程:先创建Java实体类，由框架负责根据实体类生成数据库表。Hibernate是支持正向工程的。<br>逆向工程:先创建数据库表，由框架负责根据数据库表，反向生成如下资源:</p>
<ul>
<li>Java实体类</li>
<li>Mapper接口</li>
<li>Mapper映射文件</li>
</ul>
<h3 id="12-分页插件"><a href="#12-分页插件" class="headerlink" title="12 分页插件"></a>12 分页插件</h3><p>limit index,pageSize<br>index:当前页的起始索引 idex&#x3D;(pageNum-1)*pageSize<br>pageSize:每页显示的条数<br>pageNum:当前页的起始索引<br>count:总记录数totalPage:总页数totalPage &#x3D; count &#x2F; pageSize;<br>if(count % pageSize !&#x3D; 0){<br>    totalPage +&#x3D; 1;}</p>
<h4 id="12-1、分页插件的使用步骤"><a href="#12-1、分页插件的使用步骤" class="headerlink" title="12.1、分页插件的使用步骤"></a>12.1、分页插件的使用步骤</h4><p>①添加依赖</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">	&lt;groupId&gt; com.github.pagehelper&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;pagehelper&lt;/artifactId&gt;</span><br><span class="line">	&lt;version&gt;5.2.0&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure></div>
<p>②配置分页插件<br>在MyBatis的核心配置文件中配置插件</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;plugins&gt;</span><br><span class="line">	&lt;!--设置分页插件--&gt;</span><br><span class="line">	&lt;plugin interceptor=&quot;com.github.pagehelper.pageInterceptor&quot;&gt;&lt;/plugin&gt;&lt;/plugins&gt;</span><br></pre></td></tr></table></figure></div>
<h4 id="12-2分页插件的使用"><a href="#12-2分页插件的使用" class="headerlink" title="12.2分页插件的使用"></a>12.2分页插件的使用</h4><p>a&gt;在查询功能之前使用PageHelper.startPage(int pageNum, int pageSize)开启分页功能</p>
<ul>
<li>pageNum:当前页的页码 </li>
<li>pageSize:每页显示的条数</li>
</ul>
<p>b&gt;在查询获取list集合之后，使用PageInfo<T> pageInfo &#x3D; new Pagelnfo&lt;&gt;(List<T>list, int navigatePages)获取分页相关数据</p>
<ul>
<li>list:分页之后的数据</li>
<li>navigatePages:导航分页的页码数</li>
</ul>
<p>c&gt;分页相关数据<br>Pagelnfo{pageNum&#x3D;8, pageSize&#x3D;4, size&#x3D;2,startRow&#x3D;29, endRow&#x3D;30,total&#x3D;30, pages&#x3D;8,<br>list&#x3D;Page{count&#x3D;true, pageNum&#x3D;8, pageSize&#x3D;4, startRow&#x3D;28, endRow&#x3D;32,total&#x3D;30,<br>pages&#x3D;8, reasonable&#x3D;false, pageSizeZero&#x3D;false},prePage&#x3D;7, nextPage&#x3D;0, isFirstPage&#x3D;false, isLastPage&#x3D;true, hasPreviousPage&#x3D;true,hasNextPage&#x3D;false, navigatePages&#x3D;5, navigateFirstPage4, navigateLastPage8,<br>navigatepageNums&#x3D;[4,5,6,7,8]}<br>pageNum:当前页的页码 pageSize:每页显示的条数 size:当前页显示的真实条数total:总记录数 pages:总页数 prePage:上一页的页码 nextPage:下一页的页码isFirstPage&#x2F;isLastPage:是否为第一页&#x2F;最后—页hasPreviousPage&#x2F;hasNextPage:是否存在上一页&#x2F;下一页navigatePages:导航分页的页码数navigatepageNums:导航分页的页码，[1,2,3,4,5]</p>
<h1 id="二、Spring"><a href="#二、Spring" class="headerlink" title="二、Spring"></a>二、Spring</h1><h3 id="1-spring-Franmework五大功能模块"><a href="#1-spring-Franmework五大功能模块" class="headerlink" title="1.spring Franmework五大功能模块"></a>1.spring Franmework五大功能模块</h3><table>
<thead>
<tr>
<th><strong>功能模块</strong></th>
<th><strong>功能介绍</strong></th>
</tr>
</thead>
<tbody><tr>
<td>Core Container</td>
<td>核心容器，在Spring环境下使用任何功能都必须基于IOC容器。</td>
</tr>
<tr>
<td>AOP&amp;Aspects</td>
<td>面向切面编程</td>
</tr>
<tr>
<td>Testing</td>
<td>提供了对junit或TestNG测试框架的整合。</td>
</tr>
<tr>
<td>Data Access&#x2F;Integration</td>
<td>提供了对数据访问&#x2F;集成的功能。</td>
</tr>
<tr>
<td>Spring MVC</td>
<td>提供了面向Web应用程序的集成功能。</td>
</tr>
</tbody></table>
<h3 id="2-IOC容器在spring中的实现"><a href="#2-IOC容器在spring中的实现" class="headerlink" title="2.IOC容器在spring中的实现"></a>2.IOC容器在spring中的实现</h3><p>Spring的IOC容器就是IOC思想的一个落地的产品实现。IOC容器中管理的组件也叫做 bean。在创建 bean之前，首先需要创建IOC容器。Spring提供了IOC容器的两种实现方式:</p>
<h4 id="①BeanFactory"><a href="#①BeanFactory" class="headerlink" title="①BeanFactory"></a>①BeanFactory</h4><p>这是IOC容器的基本实现，是Spring 内部使用的接口。面向Spring 本身，不提供给开发人员使用。</p>
<h4 id="②ApplicationContext"><a href="#②ApplicationContext" class="headerlink" title="②ApplicationContext"></a>②ApplicationContext</h4><p>BeanFactory的子接口，提供了更多高级特性。面向Spring的使用者，几乎所有场合都使用ApplicationContext而不是底层的 BeanFactory。</p>
<h4 id="③主要实现类"><a href="#③主要实现类" class="headerlink" title="③主要实现类"></a>③主要实现类</h4><table>
<thead>
<tr>
<th><strong>类型名</strong></th>
<th><strong>简介</strong></th>
</tr>
</thead>
<tbody><tr>
<td>ClassPathXmlApplicationContext</td>
<td>通过读取类路径下的XML格式的配置文件创建lOC容器对象</td>
</tr>
<tr>
<td>FileSystemXmlApplicationContext</td>
<td>通过文件系统路径读取XML格式的配置文件创建IOC容器对象</td>
</tr>
<tr>
<td>ConfigurableApplicationContext</td>
<td>ApplicationContext的子接口，包含一些扩展方法refresh()和close()，让ApplicationContext具有启动、关闭和刷新上下文的能力。</td>
</tr>
<tr>
<td>WebApplicationContext</td>
<td>专门为Web应用准备，基于Web环境创建IOC容器对象，并将对象&lt;b引入存入ServletContext域中</td>
</tr>
</tbody></table>
<h3 id="3-获取bean的三种方式"><a href="#3-获取bean的三种方式" class="headerlink" title="3.获取bean的三种方式:"></a>3.获取bean的三种方式:</h3><h4 id="①根据bean的id获取"><a href="#①根据bean的id获取" class="headerlink" title="①根据bean的id获取"></a>①根据bean的id获取</h4><h4 id="②根据bean的类型获取"><a href="#②根据bean的类型获取" class="headerlink" title="②根据bean的类型获取"></a>②根据bean的类型获取</h4><p>注意:根据类型获取bean时，要求IOC容器中有且只有一个类型匹配的bean<br>若没有任何一个类型匹配的bean，此时抛出异常:NoSuchBeanDefinitionException<br>若有多个类型匹配的bean，此时抛出异常:NouniqueBeanDefinitionException</p>
<h4 id="③根据bean的id和类型获取"><a href="#③根据bean的id和类型获取" class="headerlink" title="③根据bean的id和类型获取"></a>③根据bean的id和类型获取</h4><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//获取bean</span><br><span class="line">// Student studentone = (student) ioc.getBean( &quot;studentone&quot;);</span><br><span class="line">//Student student = ioc.getBean(student.class);</span><br><span class="line">Student student= (student) ioc.getBean(&quot;studentone&quot;,student.class);</span><br><span class="line">System.out.println(student);</span><br></pre></td></tr></table></figure></div>
<p>结论:根据类型来获取bean时，在满足bean l唯一性的前提下其实只是看:『对象<strong>instanceof</strong>指定的类型』的返回结果<br>只要返回的是true就可以认定为和类型匹配，能够获取到。即通过bean的类型、bean所继承的类的类型、bean所实现的接口的类型都可以获取bean</p>
<h3 id="4-依赖注入"><a href="#4-依赖注入" class="headerlink" title="4.依赖注入"></a>4.依赖注入</h3><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--</span><br><span class="line">        bean:配置一个bean对象，将对象交给IOC容器来管理。</span><br><span class="line">        属性：</span><br><span class="line">        id : bean的唯一标识，不能重复</span><br><span class="line">        class:设置bean对象所对应的类型</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;bean id=&quot;student&quot; class=&quot;com.wjp.pojo.Student&quot;&gt;&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">    &lt;bean id=&quot;studentFive&quot; class=&quot;com.wjp.pojo.Student&quot;&gt;</span><br><span class="line">        &lt;property name=&quot;sid&quot; value=&quot;1004&quot;&gt;&lt;/property&gt;</span><br><span class="line">        &lt;property name=&quot;sname&quot; value=&quot;张三&quot;&gt;&lt;/property&gt;</span><br><span class="line">        &lt;property name=&quot;age&quot; value=&quot;14&quot;&gt;&lt;/property&gt;</span><br><span class="line">        &lt;property name=&quot;gender&quot; value=&quot;男&quot;&gt;&lt;/property&gt;</span><br><span class="line">        &lt;!--ref:引用IoC容器中的某个bean的id--&gt;</span><br><span class="line">        &lt;!--&lt;property name=&quot;clazz&quot; ref=&quot;clazzOne&quot;&gt;&lt;/property&gt;--&gt;</span><br><span class="line">        &lt;!--级联的方式，要保证提前为cLazz属性赋值或者实例化--&gt;</span><br><span class="line">        &lt;!--&lt;property name=&quot;clazz.cid&quot; value=&quot;2222&quot;&gt;&lt;/property&gt;--&gt;</span><br><span class="line">        &lt;!--&lt;property name=&quot;clazz.cname&quot; value=&quot;远大前程班&quot;&gt;&lt;/property&gt;--&gt;</span><br><span class="line"></span><br><span class="line">        &lt;property name=&quot;clazz&quot;&gt;</span><br><span class="line">            &lt;!--内部bean，只能在当前bean的内部使用，不能直接通过IoC容器获取--&gt;</span><br><span class="line">            &lt;bean id=&quot;clazzInner&quot; class=&quot;com.wjp.pojo.Clazz&quot;&gt;</span><br><span class="line">                &lt;property name=&quot;cid&quot; value=&quot;2222&quot;&gt;&lt;/property&gt;</span><br><span class="line">                &lt;property name=&quot;cname&quot; value=&quot;远大前程班&quot;&gt;&lt;/property&gt;</span><br><span class="line">            &lt;/bean&gt;</span><br><span class="line">        &lt;/property&gt;</span><br><span class="line"></span><br><span class="line">        &lt;property name=&quot;hobby&quot;&gt;</span><br><span class="line">            &lt;array&gt;</span><br><span class="line">                &lt;value&gt;抽烟&lt;/value&gt;</span><br><span class="line">                &lt;value&gt;喝酒&lt;/value&gt;</span><br><span class="line">                &lt;value&gt;烫头&lt;/value&gt;</span><br><span class="line">            &lt;/array&gt;</span><br><span class="line">        &lt;/property&gt;</span><br><span class="line">        &lt;property name=&quot;teacherMap&quot; ref=&quot;teacherMap&quot;&gt;&lt;/property&gt;</span><br><span class="line">        &lt;!--&lt;property name=&quot;teacherMap&quot;&gt;--&gt;</span><br><span class="line">        &lt;!--    &lt;map&gt;--&gt;</span><br><span class="line">        &lt;!--        &lt;entry key=&quot;1001&quot; value-ref=&quot;teacherOne&quot;&gt;&lt;/entry&gt;--&gt;</span><br><span class="line">        &lt;!--        &lt;entry key=&quot;1003&quot; value-ref=&quot;teacherTwo&quot;&gt;&lt;/entry&gt;--&gt;</span><br><span class="line">        &lt;!--    &lt;/map&gt;--&gt;</span><br><span class="line">        &lt;!--&lt;/property&gt;--&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">            &lt;bean id=&quot;clazzOne&quot; class=&quot;com.wjp.pojo.Clazz&quot;&gt;</span><br><span class="line">                &lt;property name=&quot;cid&quot; value=&quot;1&quot; &gt;&lt;/property&gt;</span><br><span class="line">                &lt;property name=&quot;cname&quot; value=&quot;一班&quot; &gt;&lt;/property&gt;</span><br><span class="line">               &lt;property name=&quot;students&quot; ref=&quot;studentList&quot;&gt;&lt;/property&gt;</span><br><span class="line">                &lt;!--&lt;property name=&quot;students&quot;&gt;--&gt;</span><br><span class="line">                &lt;!--    &lt;list&gt;--&gt;</span><br><span class="line">                &lt;!--        &lt;ref bean=&quot;student&quot;&gt;&lt;/ref&gt;--&gt;</span><br><span class="line">                &lt;!--        &lt;ref bean=&quot;studentFive&quot;&gt;&lt;/ref&gt;--&gt;</span><br><span class="line">                &lt;!--    &lt;/list&gt;--&gt;</span><br><span class="line">                &lt;!--&lt;/property&gt;--&gt;</span><br><span class="line">            &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">    &lt;bean id=&quot;teacherOne&quot; class=&quot;com.wjp.pojo.Teacher&quot;&gt;</span><br><span class="line">        &lt;property name=&quot;tid&quot; value=&quot;1001&quot;&gt;&lt;/property&gt;</span><br><span class="line">        &lt;property name=&quot;tname&quot; value=&quot;jack&quot;&gt;&lt;/property&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">    &lt;bean id=&quot;teacherTwo&quot; class=&quot;com.wjp.pojo.Teacher&quot;&gt;</span><br><span class="line">        &lt;property name=&quot;tid&quot; value=&quot;1003&quot;&gt;&lt;/property&gt;</span><br><span class="line">        &lt;property name=&quot;tname&quot; value=&quot;lucy&quot;&gt;&lt;/property&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">    &lt;!--配置一个集合类型的bean，需要使用util的约束--&gt;</span><br><span class="line">    &lt;util:list id=&quot;studentList&quot;&gt;</span><br><span class="line">        &lt;ref bean=&quot;student&quot;&gt;&lt;/ref&gt;</span><br><span class="line">        &lt;ref bean=&quot;studentFive&quot;&gt;&lt;/ref&gt;</span><br><span class="line">    &lt;/util:list&gt;</span><br><span class="line"></span><br><span class="line">    &lt;util:map id=&quot;teacherMap&quot;&gt;</span><br><span class="line">        &lt;entry key=&quot;1001&quot; value-ref=&quot;teacherOne&quot;&gt;&lt;/entry&gt;</span><br><span class="line">        &lt;entry key=&quot;1003&quot; value-ref=&quot;teacherTwo&quot;&gt;&lt;/entry&gt;</span><br><span class="line">    &lt;/util:map&gt;</span><br></pre></td></tr></table></figure></div>
<h3 id="5-依赖注入之P命名空间"><a href="#5-依赖注入之P命名空间" class="headerlink" title="5.依赖注入之P命名空间"></a>5.依赖注入之P命名空间</h3><p>引入p命名空间后，可以通过以下方式为bean的各个属性赋值0</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">xmlns:p=&quot;http://www.springframework.org/schema/p&quot;</span><br><span class="line"></span><br><span class="line">    &lt;bean id=&quot;studentSix&quot; class=&quot;com.wjp.pojo.Student&quot;</span><br><span class="line">          p:sid=&quot;1005&quot; p:sname=&quot;小明&quot; p:teacherMap-ref=&quot;teacherMap&quot;&gt;&lt;/bean&gt;</span><br></pre></td></tr></table></figure></div>
<p>6.引入外部属性文件<br>①加入依赖</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;mysql&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;</span><br><span class="line">  &lt;version&gt;8.0.31&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;!--数据源--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.alibaba&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;druid&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.2.14&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure></div>
<p>②创建外部属性文件</p>
<h3 id="6-bean的作用域"><a href="#6-bean的作用域" class="headerlink" title="6.bean的作用域"></a>6.bean的作用域</h3><p>在Spring中可以通过配置bean标签的scope属性来指定bean的作用域范围，各取值含义参加下表:</p>
<table>
<thead>
<tr>
<th><strong>取值</strong></th>
<th><strong>含义</strong></th>
<th><strong>创建对象的时机</strong></th>
</tr>
</thead>
<tbody><tr>
<td>singleton（默认）</td>
<td>在IOC容器中，这个bean的对象始终为单实例</td>
<td>IOC容器初始化时</td>
</tr>
<tr>
<td>prototype</td>
<td>这个bean在IOC容器中有多个实例</td>
<td>获取bean时</td>
</tr>
</tbody></table>
<p>如果是在WebApplicationContext环境下还会有另外两个作用域(但不常用)</p>
<table>
<thead>
<tr>
<th><strong>取值</strong></th>
<th><strong>含义</strong></th>
</tr>
</thead>
<tbody><tr>
<td>request</td>
<td>在一个请求范围内有效</td>
</tr>
<tr>
<td>session</td>
<td>在一个会话范围内有效</td>
</tr>
</tbody></table>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--</span><br><span class="line">scope:设置bean的作用域</span><br><span class="line">scope=&quot;singleton | prototype&quot;</span><br><span class="line">singleton(单例):表示获取bean所对应的对象是同一个</span><br><span class="line">prototype(多例):表示获取bean所对应的对象不是同一个</span><br><span class="line">--&gt;</span><br></pre></td></tr></table></figure></div>
<h3 id="7-bean的生命周期"><a href="#7-bean的生命周期" class="headerlink" title="7.bean的生命周期"></a>7.bean的生命周期</h3><h4 id="①具体的生命周期过程"><a href="#①具体的生命周期过程" class="headerlink" title="①具体的生命周期过程"></a>①具体的生命周期过程</h4><ul>
<li>bean对象创建(调用无参构造器)</li>
<li>给bean对象设置属性</li>
<li>bean对象初始化之前操作(由bean的后置处理器负责)</li>
<li>bean对象初始化（(需在配置bean时指定初始化方法)</li>
<li>bean对象初始化之后操作(由bean的后置处理器负责)</li>
<li>bean对象就绪可以使用</li>
<li>bean对象销毁（需在配置bean时指定销毁方法)。</li>
<li>IOC容器关闭<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">     * 1，实例化</span><br><span class="line">     * 2、依赖注入</span><br><span class="line">     * 3、初始化 需要通过bean的init-method属性指定初始化的方法</span><br><span class="line">     * 4、IOC容器关闭时销毁 需要通过bean的destory-method属性指定初始化的方法</span><br><span class="line">     * 5、后置处理器的postProcessAfterInitialization</span><br><span class="line">		 * 6，IOC容器关闭时销毁，需要通过bean的destroy-method属性指定销毁的方法</span><br><span class="line"></span><br><span class="line">     */</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void test()&#123;</span><br><span class="line">        //ConfigurableApplicationContext是ApplicationContext子接口,其中扩展了刷新和关闭的功能</span><br><span class="line">        ConfigurableApplicationContext ioc = new ClassPathXmlApplicationContext(&quot;spring-lifecycle.xml&quot;);</span><br><span class="line">        User user = ioc.getBean(User.class);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">        ioc.close();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div>
注意：<br>若bean的作用域为单例时，生命周期的前三个步骤会在获取IOC容器时执行。<br>若bean的作用域为多例时，生命周期的前三个步骤会在获取bear时执行。</li>
</ul>
<h3 id="8-FactoryBean"><a href="#8-FactoryBean" class="headerlink" title="8.FactoryBean"></a>8.FactoryBean</h3><h4 id="①简介"><a href="#①简介" class="headerlink" title="①简介"></a>①简介</h4><p>FactoryBean是Spring提供的一种整合第三方框架的常用机制。和普通的bean不同，配置一个FactoryBean类型的bean，在获取bean的时候得到的并不是class属性中配置的这个类的对象，而是getObject()方法的返回值。通过这种机制，Spring可以帮我们把复杂组件创建的详细过程和繁琐细节都屏蔽起来，只把最简洁的使用界面展示给我们。<br>FactoryBean是一个接口，需要创建一个类实现该接口<br>其中有三个方法:</p>
<ul>
<li>getobject() : 通过一个对象交给IoC容器管理</li>
<li>getobjectType():设置所提供对象的类型</li>
<li>issingleton():所提供的对象是否单例</li>
</ul>
<p>当把FactoryBean的实现类配置为bean时，会将当前类中getobject()所返回的对象交给IoC容器管理<br><strong>1.bean的生命周期</strong><br><strong>2.aop相关问题</strong><br><strong>3、动态代理</strong><br><strong>4、spring有哪些扩展点</strong><br><strong>5、设计模式</strong><br><strong>6、applicationcontext和beanfactory的区别</strong><br><strong>7.beanFactory和FactoryBean的区别</strong></p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">AOP术语：</span><br><span class="line">    横切关注点：跨越多个业务模块的功能</span><br><span class="line">    切面：横切关注点的模块化对象</span><br><span class="line">    连接点：程序执行的某个特定位置</span><br><span class="line">           两个信息可以确定一个连接点：方法表示的执行点；执行点的方位</span><br><span class="line">    切点：对连接点的详细描述</span><br><span class="line">    通知：就是切面类中的方法，也就是要扩展的功能</span><br><span class="line">    目标：被代理的对象</span><br><span class="line">    代理：</span><br><span class="line">AOP在spring框架中使用步骤：</span><br><span class="line">    1、导入依赖：</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">              &lt;groupId&gt;org.springframework&lt;/groupId&gt;</span><br><span class="line">              &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;</span><br><span class="line">              &lt;version&gt;5.3.18&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">    2、创建切面类，给切面类加上注解@Aspect、@Component、@Order</span><br><span class="line">    3、配置文件中告知Spring采用的注解方式：&lt;aop:aspectj-autoproxy/&gt;</span><br><span class="line">切点表达式：</span><br><span class="line">    execution(public int org.example.proxy.aspectjproxy.Calculator.add(int,int))</span><br><span class="line">    通配符 *</span><br><span class="line">        execution(* *.*(..))</span><br><span class="line">        第1个*表示：任何的修饰符以及返回值</span><br><span class="line">        第2个*表示：任何包中的任意类</span><br><span class="line">        第3个*表示：类中的任何方法</span><br><span class="line">        两个点：表示任何参数列表</span><br><span class="line">    切点可以通过空方法来表示，以便重用：</span><br><span class="line">        @Pointcut(&quot;execution(public int org.example.proxy.aspectjproxy.Calculator.*(int,int))&quot;)</span><br><span class="line">        public static void pointCutExpression()&#123;&#125;</span><br></pre></td></tr></table></figure></div>
<h3 id="9-AOP面向切面编程"><a href="#9-AOP面向切面编程" class="headerlink" title="9.AOP面向切面编程"></a>9.AOP面向切面编程</h3><h4 id="1-AOP核心概念"><a href="#1-AOP核心概念" class="headerlink" title="1 AOP核心概念"></a>1 AOP核心概念</h4><ul>
<li><p>目标对象（Target )∶原始功能去掉共性功能对应的类产生的对象，这种对象是无法直接完成最终工作的</p>
</li>
<li><p>代理（ Proxy )︰目标对象无法直接完成工作，需要对其进行<strong>功能回填</strong>，通过原始对象的代理对象实现</p>
<p>  SpringAOP本质:代理模式</p>
</li>
</ul>
<h4 id="AOP-面向切面编程"><a href="#AOP-面向切面编程" class="headerlink" title="**AOP 面向切面编程 **"></a>**AOP 面向切面编程 **</h4><h4 id="一种编程范式"><a href="#一种编程范式" class="headerlink" title="一种编程范式"></a><strong>一种编程范式</strong></h4><p>作用：在不惊动原始设计的基础上为其进行功能增强<br>Spring理念：无侵入式的&#x2F;无入侵式</p>
<h5 id="1-1-连接点-（JoinPoint"><a href="#1-1-连接点-（JoinPoint" class="headerlink" title="1.1 连接点 （JoinPoint )"></a>1.1 连接点 （JoinPoint )</h5><p>程序执行过程中的任意位置，粒度为执行方法、抛出异常、设置变量等<br>        在springAOP中，理解为方法的执行</p>
<h5 id="1-2-切入点-Pointcut-匹配连接点的式子"><a href="#1-2-切入点-Pointcut-匹配连接点的式子" class="headerlink" title="1.2 切入点( Pointcut ):匹配连接点的式子"></a>1.2 切入点( Pointcut ):匹配连接点的式子</h5><pre><code>     在springAoP中，一个切入点可以只描述一个具体方法，也可以匹配多个方法				一个具体方法: com.itheima. dao包下的BookDao接口中的无形参无返回值的save方法				匹配多个方法:所有的save方法，所有的get开头的方法，所有以Dao结尾的接口中的任意方法，所有带有一个参数的方法
</code></pre>
<h5 id="1-3-通知（-Advice-在切入点处执行的操作，也就是共性功能"><a href="#1-3-通知（-Advice-在切入点处执行的操作，也就是共性功能" class="headerlink" title="1.3 通知（ Advice ):在切入点处执行的操作，也就是共性功能"></a>1.3 通知（ Advice ):在切入点处执行的操作，也就是共性功能</h5><pre><code>    在SpringAOP中，功能最终以方法的形式呈现
</code></pre>
<h5 id="1-4-通知类-定义通知的类"><a href="#1-4-通知类-定义通知的类" class="headerlink" title="1.4 通知类:定义通知的类"></a>1.4 通知类:定义通知的类</h5><h5 id="1-5-切面-Aspect-︰描述通知与切入点的对应关系"><a href="#1-5-切面-Aspect-︰描述通知与切入点的对应关系" class="headerlink" title="1.5 切面(Aspect )︰描述通知与切入点的对应关系"></a>1.5 切面(Aspect )︰描述通知与切入点的对应关系</h5><h4 id="2-AOP-切入点表达式"><a href="#2-AOP-切入点表达式" class="headerlink" title="2 AOP 切入点表达式"></a>2 AOP 切入点表达式</h4><h5 id="2-1-切入点-要进行增强的方法"><a href="#2-1-切入点-要进行增强的方法" class="headerlink" title="2.1 切入点:要进行增强的方法"></a>2.1 切入点:要进行增强的方法</h5><h5 id="2-2-切入点表达式-要进行增强的方法的描述方式"><a href="#2-2-切入点表达式-要进行增强的方法的描述方式" class="headerlink" title="2.2 切入点表达式:要进行增强的方法的描述方式"></a>2.2 切入点表达式:要进行增强的方法的描述方式</h5><h5 id="2-3-描述方式一"><a href="#2-3-描述方式一" class="headerlink" title="2.3 描述方式一"></a>2.3 描述方式一</h5><pre><code>    执行com.itheima.dao包下的BookDao接口中的无参数update方法
</code></pre>
<p>execution(void com.itheima.dao.BookDao.update())</p>
<h5 id="2-4-描述方式二"><a href="#2-4-描述方式二" class="headerlink" title="2.4 描述方式二"></a>2.4 描述方式二</h5><p>执行com.itheima.dao.impl包下的BookDaoImpl类中的无参数update方法	execution(void com.itheima.dao.impl.BookDaoImpl.update())</p>
<h5 id="2-5-AOP切入点表达式"><a href="#2-5-AOP切入点表达式" class="headerlink" title="2.5 AOP切入点表达式"></a>2.5 AOP切入点表达式</h5><pre><code>切入点表达式标准格式︰动作关键字（访问修饰符―返回值﹐包名.类/接口名.方法名（参数）异常名)
</code></pre>
<p>execution (public User com.itheima.service.UserService.findById (int) )</p>
<ul>
<li>动作关键字︰描述切入点的行为动作，例如execution表示执行到指定切入点</li>
<li>访问修饰符:public , private等，可以省略</li>
<li>返回值</li>
<li>包名</li>
<li>类&#x2F;接口名方法名参数</li>
<li>异常名︰方法定义中抛出指定异常，可以省略</li>
</ul>
<h5 id="2-6-使用通配符描述切入点"><a href="#2-6-使用通配符描述切入点" class="headerlink" title="2.6 使用通配符描述切入点"></a>2.6 使用通配符描述切入点</h5><h5 id="2-7-AOP切入点表达式"><a href="#2-7-AOP切入点表达式" class="headerlink" title="2.7 AOP切入点表达式"></a>2.7 AOP切入点表达式</h5><h5 id="2-8-AOP通知类型"><a href="#2-8-AOP通知类型" class="headerlink" title="2.8 AOP通知类型"></a>2.8 AOP通知类型</h5><h6 id="2-8-1-Before"><a href="#2-8-1-Before" class="headerlink" title="2.8.1 @Before"></a>2.8.1 @Before</h6><ul>
<li><p>类型：方法注解</p>
</li>
<li><p>位置：通知方法定义上方</p>
</li>
<li><p>作用：设置当前通知方法与切入点之间的绑定关系，当前通知方法在原始切入点方法前运行</p>
</li>
<li><p>范例</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@Before(&quot;pt()&quot;)</span><br><span class="line">public void before()&#123;</span><br><span class="line">	System.out.println(&quot;before advice&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>相关属性：value(默认)：切入点方法名，格式为类名.方法名（）</p>
</li>
</ul>
<h6 id="2-8-2-After"><a href="#2-8-2-After" class="headerlink" title="2.8.2 @After"></a>2.8.2 @After</h6><ul>
<li><p>类型：方法注解</p>
</li>
<li><p>位置：通知方法定义上方</p>
</li>
<li><p>作用：设置当前通知方法与切入点之间的绑定关系，当前通知方法在原始切入点方法后运行</p>
</li>
<li><p>范例</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@After(&quot;pt()&quot;)</span><br><span class="line">public void after()&#123;</span><br><span class="line">	System.out.println(&quot;after advice&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>相关属性：value(默认)：切入点方法名，格式为类名.方法名（）</p>
</li>
</ul>
<h6 id="2-8-3-Around"><a href="#2-8-3-Around" class="headerlink" title="2.8.3 @Around"></a>2.8.3 @Around</h6><ul>
<li><p>类型：方法注解</p>
</li>
<li><p>位置：通知方法定义上方</p>
</li>
<li><p>作用：设置当前通知方法与切入点之间的绑定关系，当前通知方法在原始切入点方法前后运行</p>
</li>
<li><p>范例</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@Around(&quot;pt()&quot;)</span><br><span class="line">public object around(ProceedingJoinPoint pjp) throws Throwable &#123;</span><br><span class="line">    system.out.println( &quot;around before advice ...&quot; );</span><br><span class="line">    object ret = pjp.proceed();</span><br><span class="line">    system.out.println( &quot;around after advice ...&quot; );</span><br><span class="line">    return ret;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>@Around注意事项}</p>
<ol>
<li>环绕通知必须依赖形参ProceedingJoinPoint才能实现对原始方法的调用，进而实现原始方法调用前后同时添加通知</li>
<li>通知中如果未使用ProceedingJoinPoint对原始方法进行调用将跳过原始方法的执行</li>
<li>对原始方法的调用可以不接收返回值，通知方法设置成void即可，如果接收返回值，必须设定为Object类型</li>
<li>原始方法的返回值如果是void类型，通知方法的返回值类型可以设置成void，也可以设置成Object</li>
<li>由于无法预知原始方法运行后是否会抛出异常，因此环绕通知方法必须抛出Throwable对象<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@Around(&quot;pt()&quot;)</span><br><span class="line">public object around(ProceedingJoinPoint pjp) throws Throwable &#123;</span><br><span class="line">  system.out.println( &quot;around before advice ...&quot; );</span><br><span class="line">  object ret = pjp.proceed();</span><br><span class="line">  system.out.println( &quot;around after advice ...&quot; );</span><br><span class="line">  return ret;</span><br></pre></td></tr></table></figure></div></li>
</ol>
</li>
</ul>
<h6 id="2-8-4-AfterReturning"><a href="#2-8-4-AfterReturning" class="headerlink" title="2.8.4 @AfterReturning"></a>2.8.4 @AfterReturning</h6><ul>
<li><p>类型：方法注解</p>
</li>
<li><p>位置：通知方法定义上方</p>
</li>
<li><p>作用：设置当前通知方法与切入点之间的绑定关系，当前通知方法在原始切入点方法正常执行完毕后运行</p>
</li>
<li><p>范例</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@AfterReturning(&quot;pt()&quot;)</span><br><span class="line">public void afterReturning( ) &#123;</span><br><span class="line">	system.out.print1n( &quot;afterReturning advice ... &quot; );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>相关属性：value(默认)：切入点方法名，格式为类名.方法名（)</p>
</li>
</ul>
<h6 id="2-8-5-AfterThrowing"><a href="#2-8-5-AfterThrowing" class="headerlink" title="2.8.5 @AfterThrowing"></a>2.8.5 @AfterThrowing</h6><ul>
<li><p>类型：方法注解</p>
</li>
<li><p>位置：通知方法定义上方</p>
</li>
<li><p>作用：设置当前通知方法与切入点之间的绑定关系，当前通知方法在原始切入点方法运行抛出异常后执行</p>
</li>
<li><p>范例</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@AfterReturning(&quot;pt()&quot;)</span><br><span class="line">public void afterThrowing( ) &#123;</span><br><span class="line">	system.out.print1n( &quot;afterThrowing advice ... &quot; );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>相关属性：value(默认)：切入点方法名，格式为类名.方法名（)</p>
</li>
</ul>
<p>3.测试业务层接口万次执行效率</p>
<ul>
<li>分析:<ul>
<li>业务功能:业务层接口执行前后分别记录时间，求差值得到执行</li>
<li>通知类型选择前后均可以增强的类型——<strong>环绕通知</strong></li>
</ul>
</li>
</ul>
<h4 id="4-AOP通知获取数据"><a href="#4-AOP通知获取数据" class="headerlink" title="4.AOP通知获取数据"></a>4.AOP通知获取数据</h4><ul>
<li>获取切入点方法的参数 <ul>
<li>JoinPoint:适用于前置、后置、返回后、抛出异常后通知- </li>
<li>ProceedJointPoint :适用于环绕通知</li>
</ul>
</li>
<li>获取切入点方法返回值<ul>
<li>返回后通知</li>
<li>环绕通知</li>
</ul>
</li>
<li>获取切入点方法运行异常信息<ul>
<li>抛出异常后通知</li>
<li>环绕通知</li>
</ul>
</li>
</ul>
<h4 id="5-AOP总结"><a href="#5-AOP总结" class="headerlink" title="5.AOP总结"></a>5.AOP总结</h4><h5 id="5-1-概念-AOP-Aspect-Oriented-Programming-面向切面编程，一种编程范式"><a href="#5-1-概念-AOP-Aspect-Oriented-Programming-面向切面编程，一种编程范式" class="headerlink" title="5.1 概念:AOP(Aspect Oriented Programming)面向切面编程，一种编程范式"></a>5.1 概念:AOP(Aspect Oriented Programming)面向切面编程，一种编程范式</h5><h5 id="5-2-作用-在不惊动原始设计的基础上为方法进行功能增强"><a href="#5-2-作用-在不惊动原始设计的基础上为方法进行功能增强" class="headerlink" title="5.2 作用:在不惊动原始设计的基础上为方法进行功能增强"></a>5.2 作用:在不惊动原始设计的基础上为方法进行功能增强</h5><h5 id="5-3-核心概念"><a href="#5-3-核心概念" class="headerlink" title="5.3 核心概念"></a>5.3 核心概念</h5><ul>
<li>代理(Proxy ) : SpringAOP的核心本质是采用代理模式实现的</li>
<li>连接点( JoinPoint ) :在springAoP中，理解为任意方法的执行</li>
<li>切入点( Pointcut ) ︰匹配连接点的式子，也是具有共性功能的方法描述</li>
<li>通知(Advice ):若干个方法的共性功能，在切入点处执行，最终体现为一个方法</li>
<li>切面(Aspect )︰描述通知与切入点的对应关系</li>
<li>目标对象(Target )︰被代理的原始对象成为目标对象</li>
</ul>
<h5 id="5-4-切入点表达式标准格式︰动作关键字（访问修饰符﹐返回值﹐包名-类-x2F-接口名-方法名（参数"><a href="#5-4-切入点表达式标准格式︰动作关键字（访问修饰符﹐返回值﹐包名-类-x2F-接口名-方法名（参数" class="headerlink" title="5.4 切入点表达式标准格式︰动作关键字（访问修饰符﹐返回值﹐包名.类&#x2F;接口名.方法名（参数)"></a>5.4 切入点表达式标准格式︰动作关键字（访问修饰符﹐返回值﹐包名.类&#x2F;接口名.方法名（参数)</h5><p>异常名)</p>
<ul>
<li>execution(* com.itheima.service.<em>Service.</em>( .. )）</li>
</ul>
<h5 id="5-5-切入点表达式描述通配符"><a href="#5-5-切入点表达式描述通配符" class="headerlink" title="5.5 切入点表达式描述通配符:"></a>5.5 切入点表达式描述通配符:</h5><ul>
<li>作用 : 用于快速描述，范围描述</li>
<li>*:匹配任意符号（常用)</li>
<li>.. ：匹配多个连续的任意符号（常用)</li>
<li>+:匹配子类类型</li>
</ul>
<h5 id="5-6-切入点表达式书写技巧"><a href="#5-6-切入点表达式书写技巧" class="headerlink" title="5.6 切入点表达式书写技巧"></a>5.6 切入点表达式书写技巧</h5><ul>
<li>1.按<strong>标准规范</strong>开发</li>
<li>2.查询操作的返回值建议使用 <em>匹配</em></li>
<li>3.减少使用..的形式描述包</li>
<li>4.<strong>对接口进行描述</strong>，使用_表示模块名，例如UserService的匹配描述为_ * Service</li>
<li>5.方法名书写保留动词，例如get，使用_表示名词，例如getById匹配描述为getBy_</li>
<li>6.参数根据实际情况灵活调整</li>
</ul>
<h5 id="5-7-通知类型"><a href="#5-7-通知类型" class="headerlink" title="5.7 通知类型"></a>5.7 通知类型</h5><ul>
<li>前置通知</li>
<li>后置通知</li>
<li>环绕通知（重点)<ul>
<li>环绕通知依赖形参ProceedingJoinPoint才能实现对原始方法的调用环绕通知可以隔离原始方法的调用执行</li>
<li>环绕通知返回值设置为object类型</li>
<li>环绕通知中可以对原始方法调用过程中出现的异常进行处理</li>
</ul>
</li>
<li>返回后通知</li>
<li>抛出异常后通知</li>
</ul>
<h5 id="5-8-获取切入点"><a href="#5-8-获取切入点" class="headerlink" title="5.8 获取切入点"></a>5.8 获取切入点</h5><ul>
<li>获取切入点方法的参数<ul>
<li>JoinPoint:适用于前置、后置、返回后、抛出异常后通知，设置为方法的第一个形参</li>
<li>ProceedJointPoint:适用于环绕通知</li>
</ul>
</li>
<li>获取切入点方法返回值<ul>
<li>返回后通知</li>
<li>环绕通知</li>
</ul>
</li>
<li>获取切入点方法运行异常信息<ul>
<li>抛出异常后通知</li>
<li>环绕通知</li>
</ul>
</li>
</ul>
<h1 id="IOC容器的核心实现原理是什么"><a href="#IOC容器的核心实现原理是什么" class="headerlink" title="IOC容器的核心实现原理是什么"></a>IOC<strong>容器的核心实现原理是什么</strong></h1><p>一种设计思想<br>控制反转:理论思想，原来的对象是由使用者来进行控制，有了spring之后，可以把整个对象交给spring来帮我们进行管理DI:依赖注入，把对应的属性的值注入到具体的对象中，@Autowired，populateBean完成属性值的注入容器︰存储对象，使用map结构来存储，在spring中一般存在三级缓存,singletonObjects存放完整的bean对象,整个bean的生命周期，从创建到使用到销毁的过程全部都是由容器来管理(bean的生命周期)<br>BeanFactory是根接口，完成访问Bean访问的根接口<br>为了具象化表述refresh的13个方法以及对应的核心实现逻辑<br><strong>Spring框架中有那些扩展的方式</strong><br>参考链接<br>[<a class="link"   target="_blank" rel="noopener" href="https://blog.csdn.net/u011119684/article/details/103206774" >https://blog.csdn.net/u011119684/article/details/103206774 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>]:<br><strong>详细聊一下bean的生命周期</strong><br>1、实例化(Instantiation)<br>2、属性设置(populate)<br>3、初始化(Initialization)<br>4、销毁(Destruction)<br><strong>BeanFactory和FactoryBean的区别</strong><br><strong>BeanFactory是个Factory，也就是IOC容器或对象工厂，FactoryBean是个Bean</strong></p>
<h1 id="Spring事务"><a href="#Spring事务" class="headerlink" title="Spring事务"></a>Spring事务</h1><ul>
<li>事务作用︰在数据层保障一系列的数据库操作同成功同失败</li>
<li>Spring事务作用︰在<strong>数据层或业务层</strong>保障一系列的数据库操作同成功同失败<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public interface PlatformTransactionManager&#123;</span><br><span class="line">	void commit(Transactionstatus status) throws TransactionException;</span><br><span class="line">    void rollback(TransactionStatus status) throws TransactionException;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public class DataSourceTransactionManager&#123;</span><br><span class="line">    ...............</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li>
</ul>
<h1 id="声明式事务"><a href="#声明式事务" class="headerlink" title="声明式事务"></a>声明式事务</h1><h3 id="1-JdbcTemplate"><a href="#1-JdbcTemplate" class="headerlink" title="1.JdbcTemplate"></a>1.JdbcTemplate</h3><h4 id="简介："><a href="#简介：" class="headerlink" title="简介："></a>简介：</h4><p>Spring 框架对JDBC进行封装，使用JdbcTemplate方便实现对数据库操作.</p>
<h4 id="①依赖导入"><a href="#①依赖导入" class="headerlink" title="①依赖导入"></a>①依赖导入</h4><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependencies&gt;</span><br><span class="line">  &lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-context&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;5.3.23&lt;/version&gt;</span><br><span class="line">  &lt;/dependency&gt;</span><br><span class="line">  &lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;5.3.23&lt;/version&gt;</span><br><span class="line">  &lt;/dependency&gt;</span><br><span class="line">  &lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;junit&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;junit&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;4.12&lt;/version&gt;</span><br><span class="line">    &lt;scope&gt;test&lt;/scope&gt;</span><br><span class="line">  &lt;/dependency&gt;</span><br><span class="line">  &lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;mysql&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;8.0.31&lt;/version&gt;</span><br><span class="line">  &lt;/dependency&gt;</span><br><span class="line">  &lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.alibaba&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;druid&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.0.31&lt;/version&gt;</span><br><span class="line">  &lt;/dependency&gt;</span><br><span class="line">  &lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-test&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;5.3.24&lt;/version&gt;</span><br><span class="line">  &lt;/dependency&gt;</span><br><span class="line">  &lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;junit&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;junit&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;4.12&lt;/version&gt;</span><br><span class="line">    &lt;scope&gt;test&lt;/scope&gt;</span><br><span class="line">  &lt;/dependency&gt;</span><br><span class="line">    &lt;/dependencies&gt;</span><br></pre></td></tr></table></figure></div>
<h4 id="②创建jdbc-properties"><a href="#②创建jdbc-properties" class="headerlink" title="②创建jdbc.properties"></a>②创建jdbc.properties</h4><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">jdbc.driver=com.mysql.cj.jdbc.Driver</span><br><span class="line">jdbc.url=jdbc:mysql://localhost:3306/ssm?serverTimezone=UTC</span><br><span class="line">jdbc.username=root</span><br><span class="line">jdbc.password=wjp123456</span><br></pre></td></tr></table></figure></div>
<h4 id="③配置spring的配置文件"><a href="#③配置spring的配置文件" class="headerlink" title="③配置spring的配置文件"></a>③配置spring的配置文件</h4><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--引入jbdc.properties,之后可以通过$&#123;key&#125;的方式访问--&gt;</span><br><span class="line">    &lt;context:property-placeholder location=&quot;jdbc.properties&quot;&gt;&lt;/context:property-placeholder&gt;</span><br><span class="line">    &lt;bean id=&quot;druidDataSource&quot; class=&quot;com.alibaba.druid.pool.DruidDataSource&quot;&gt;</span><br><span class="line">        &lt;property name=&quot;driverClassName&quot; value=&quot;$&#123;jdbc.driver&#125;&quot;&gt;&lt;/property&gt;</span><br><span class="line">        &lt;property name=&quot;url&quot; value=&quot;$&#123;jdbc.url&#125;&quot;&gt;&lt;/property&gt;</span><br><span class="line">        &lt;property name=&quot;username&quot; value=&quot;$&#123;jdbc.username&#125;&quot;&gt;&lt;/property&gt;</span><br><span class="line">        &lt;property name=&quot;password&quot; value=&quot;$&#123;jdbc.password&#125;&quot;&gt;&lt;/property&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--配置jdbcTemplate--&gt;</span><br><span class="line">    &lt;bean id=&quot;jdbcTemplate&quot; class=&quot;org.springframework.jdbc.core.JdbcTemplate&quot;&gt;</span><br><span class="line">      &lt;!--装配数据源--&gt;</span><br><span class="line">        &lt;property name=&quot;dataSource&quot; ref=&quot;druidDataSource&quot;&gt;&lt;/property&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br></pre></td></tr></table></figure></div>
<h3 id="2-测试"><a href="#2-测试" class="headerlink" title="2.测试"></a>2.测试</h3><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">//指定当前测试类在Spring的测试环境中执行，此时就可以通过注入的方式直接获取IOC容器中bean</span><br><span class="line">@RunWith(SpringJUnit4ClassRunner.class)</span><br><span class="line">//设置spring测试环境的配置文件</span><br><span class="line">@ContextConfiguration(&quot;classpath:spring-jdbc.xml&quot;)</span><br><span class="line">public class JdbcTemplateTest &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private JdbcTemplate jdbcTemplate;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void testInsert()&#123;</span><br><span class="line">        String sql = &quot;insert into t_user value(null,?,?,?,?,?)&quot;;</span><br><span class="line">        jdbcTemplate.update(sql,&quot;root&quot;,&quot;123&quot;,12,&quot;男&quot;,&quot;12345@qq.com&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void testGetUserById()&#123;</span><br><span class="line">        String sql = &quot;select * from t_user where id = ?&quot;;</span><br><span class="line">        User user = jdbcTemplate.queryForObject(sql, new BeanPropertyRowMapper&lt;&gt;(User.class), 1);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void testGetAllUser()&#123;</span><br><span class="line">        String sql = &quot;select * from t_user&quot;;</span><br><span class="line">        List&lt;User&gt; list = jdbcTemplate.query(sql, new BeanPropertyRowMapper&lt;&gt;(User.class));</span><br><span class="line">        list.forEach(System.out::println);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>声明式事务的配置步骤:1、在spring的配置文件中配置事务管理器<br>2、开启事务的注解驱动在需要被事务管理的方法上，添加@Transactional注解，该方法就会被事务管理<br>事务四大特性:<strong>原子性、一致性、隔离性、持久性</strong>。</p>
<h3 id="3-什么是事物"><a href="#3-什么是事物" class="headerlink" title="3 .什么是事物"></a>3 .什么是事物</h3><p>定义： 事物就是数据库执行过程中的一个逻辑单位，由一个有限的数据库操作序列构成。 本质： 由一个或多个sql语句组成。这些sql语句在执行过程中被当作一个整体，要么全部的sql语句执行成功，要么全部失败。不存在一部分执行成功，一部分执行失败。</p>
<h3 id="4-事物的四大特性"><a href="#4-事物的四大特性" class="headerlink" title="4 .事物的四大特性"></a>4 .事物的四大特性</h3><h4 id="4-1-原子性（Atomicity）"><a href="#4-1-原子性（Atomicity）" class="headerlink" title="4.1 原子性（Atomicity）"></a>4.1 原子性（Atomicity）</h4><p>原子性就是将事物进行的操作捆绑成一个不可分割的单元，事物中进行的数据操作要么全部成功，要么全部失败（回滚）。</p>
<h4 id="4-2-一致性（Consistency）"><a href="#4-2-一致性（Consistency）" class="headerlink" title="4.2 一致性（Consistency）"></a>4.2 一致性（Consistency）</h4><p>一致性是指事物使数据库从一个一致性状态转换到另一个一致性状态。也就是数据库前后必须处于一致性状态。 拿转账来说，假设用户A和用户B两者的钱加起来一共是5000，那么不管A和B之间如何转账，转几次账，事务结束后两个用户的钱相加起来应该还得是5000，这就是事务的一致性。</p>
<h4 id="4-3-隔离性（Isolation，又称独立性）"><a href="#4-3-隔离性（Isolation，又称独立性）" class="headerlink" title="4.3 隔离性（Isolation，又称独立性）"></a>4.3 隔离性（Isolation，又称独立性）</h4><p>多个用户并发访问数据库，数据库为每个用户开启一个事物，每个事物相互独立，互不干扰。 事务的隔离性主要规定了各个事务之间相互影响的程度。隔离性概念主要面向对数据资源的并发访问(Concurrency)，并兼顾影响事务的一致性。当两个事务或者更多事务同时访问同一数据资源的时候，不同的隔离级别决定了各个事务对该数据资源访问的不同行为。 事务的隔离级别，隔离程度按照从弱到强分别为“Read Uncommitted (未提交读)”，“Read Committed（提交读）”，“Repeatable Read（可重复读）”和“Serializable（序列化）”。</p>
<h4 id="4-4-事务的持久性-Durability"><a href="#4-4-事务的持久性-Durability" class="headerlink" title="4.4 事务的持久性(Durability)"></a>4.4 事务的持久性(Durability)</h4><p>持久性是指一个事务一旦被提交了，那么对数据库中的数据的改变就是永久性的，即便是在数据库系统遇到故障的情况下也不会丢失提交事务的操作。</p>
<h3 id="5-不考虑隔离性会发生的问题"><a href="#5-不考虑隔离性会发生的问题" class="headerlink" title="5 .不考虑隔离性会发生的问题"></a>5 .不考虑隔离性会发生的问题</h3><p>在实际应用中，数据库的事务有两种，读事务（select），修改事务（update，insert）。在没有事务控制的时候，多个用户同时操作相同的数据时，可能会产生并发问题，基本上归结为4中问题。<br>1.数据丢失：两个更新事务同时修改一条数据时，会造成数据的丢失。 2.脏读：脏读是指在一个事务处理过程里读取了另一个未提交的事务中的数据。 3.不可重复读：不可重复读是指在对于数据库中的某个数据，一个事务范围内多次查询却返回了不同的数据值，这是由于在查询间隔，被另一个事务修改并提交了。例如事务T1在读取某一数据，而事务T2立马修改了这个数据并且提交事务给数据库，事务T1再次读取该数据就得到了不同的结果，发送了不可重复读。 4.幻读&#x2F;虚读：幻读是事务非独立执行时发生的一种现象。例如事务T1对一个表中所有的行的某个数据项做了从“1”修改为“2”的操作，这时事务T2又对这个表中插入了一行数据项，而这个数据项的数值还是为“1”并且提交给数据库。而操作事务T1的用户如果再查看刚刚修改的数据，会发现还有一行没有修改，其实这行是从事务T2中添加的，就好像产生幻觉一样，这就是发生了幻读。</p>
<h3 id="6-区别"><a href="#6-区别" class="headerlink" title="6 .区别"></a>6 .区别</h3><p>1.不可重复读和脏读的区别是，脏读是某一事务读取了另一个事务未提交的脏数据，而不可重复读则是读取了前一事务提交的数据。 2.幻读和不可重复读都是读取了另一条已经提交的事务（这点就脏读不同）。所不同的是不可重复读查询的都是同一个数据项，而幻读针对的是一批数据整体（比如数据的个数）；不可重复读是指读到了已经提交的事务的更改数据(修改)，幻读是指读到了其他已经提交事务的新增或删除数据。 3.解决不可重复读的问题只需锁住满足条件的行，解决幻读需要锁表。</p>
<h3 id="7-事务的隔离级别"><a href="#7-事务的隔离级别" class="headerlink" title="7 .事务的隔离级别"></a>7 .事务的隔离级别</h3><h4 id="7-1-Read-uncommitted-读未提交"><a href="#7-1-Read-uncommitted-读未提交" class="headerlink" title="7.1 Read uncommitted (读未提交)"></a>7.1 Read uncommitted (读未提交)</h4><p>如果一个事务A已经开始写数据，则另一个事务B不允许写操作。但是可以读取这个事务A修改但未提交的数据。最低级别，任何情况都无法保证。</p>
<h4 id="7-2-Read-Committed-读已提交"><a href="#7-2-Read-Committed-读已提交" class="headerlink" title="7.2 Read Committed (读已提交)"></a>7.2 Read Committed (读已提交)</h4><p>事务A只能读取事务B修改并且提交后的数据行，禁止访问事务B处于写状态的数据行。可以避免脏读。</p>
<h4 id="7-3-Repeatable-Read（可重复读取）"><a href="#7-3-Repeatable-Read（可重复读取）" class="headerlink" title="7.3 Repeatable Read（可重复读取）"></a>7.3 Repeatable Read（可重复读取）</h4><p>事务A在读取数据行时，禁止其他事务对该数据行进行更改，但是可以进行读取操作。进行写操作时，禁止其他事务的任何操作。可以防止脏读和不可重复读。</p>
<h4 id="7-4-Serializable-可串行化"><a href="#7-4-Serializable-可串行化" class="headerlink" title="7.4 Serializable (可串行化)"></a>7.4 Serializable (可串行化)</h4><p>提供严格的隔离级别，要求事务一个个的执行。不能并发执行。有效的防止脏读，不可重复读，幻读。</p>
<h3 id="8-mysql与oracle的区别"><a href="#8-mysql与oracle的区别" class="headerlink" title="8 mysql与oracle的区别"></a>8 mysql与oracle的区别</h3><ul>
<li>mysql支持4中隔离级别，且自动提交，其中默认的隔离级别是repeatable read。</li>
<li>在mysql中查看当前的隔离级别，select @@tx_isolation;</li>
<li>在mysql中设置数据库的隔离级别，set tx_isolation&#x3D;‘隔离级别名称’，一定要在开启事务之前，设置隔离级别。如果通过jdbc设置事务的隔离级别，也要在开启事务代码前，写上隔离级别代码。</li>
<li>oracle支持两种隔离级别(read committed,serializable)，需要手动提交，默认的隔离级别是read committed。</li>
</ul>
<h1 id="SpringMVC概述"><a href="#SpringMVC概述" class="headerlink" title="SpringMVC概述"></a>SpringMVC概述</h1><ul>
<li>S pringMVC技术与servlet技术功能等同，均属于web层开发技术</li>
<li><pre><code>SpringMVC是一种基于Java实现MVC模型的轻量级web框架
</code></pre>
</li>
<li>优点<ul>
<li>使用简单，开发便捷（相比于Servlet)</li>
<li>灵活性强</li>
</ul>
</li>
</ul>
<p>1.掌握基于springMVC获取请求参数与响应json数据操作2.熟练应用基于REST风格的请求路径设置与参数传递3.能够根据实际业务建立前后端开发通信协议并进行实现4.基于SSM整合技术开发任意业务模块功能<br>注:三层架构分为表述层(或表示层)、业务逻辑层、数据访问层，表述层表示前台页面和后台servlet<br>image-20221124160144022</p>
<h3 id="2-启动服务器初始化过程"><a href="#2-启动服务器初始化过程" class="headerlink" title="2.启动服务器初始化过程"></a>2.启动服务器初始化过程</h3><p>1． 服务器启动，执行ServletContainersInitConfig类，初始化web容器<br>2．执行createServletApplicationContext方法，创建了WebApplicationContext对象<br>3．加载SpringMvcConfig<br>4．执行@ComponentScan加载对应的bean<br>5．加载UserController，每个@RequestMapping的名称对应一个具体的方法<br>6．执行getServletMappings方法，定义所有的请求都通过SpringMVC</p>
<ul>
<li><strong>单次请求过程</strong></li>
</ul>
<ol>
<li>发送请求localhost&#x2F;save</li>
<li>web容器发现所有请求都经过SpringMVc，将请求交给springMVC处理</li>
<li>解析请求路径&#x2F;save</li>
<li>由&#x2F;save匹配执行对应的方法save()</li>
<li>执行save()</li>
<li>检测到有@ResponseBody直接将save()方法的返回值作为响应体返回给请求方</li>
</ol>
<h3 id="3-请求与响应"><a href="#3-请求与响应" class="headerlink" title="3.请求与响应"></a>3.请求与响应</h3><h4 id="3-1请求映射路径"><a href="#3-1请求映射路径" class="headerlink" title="3.1请求映射路径"></a>3.1<strong>请求映射路径</strong></h4><ul>
<li>名称:@RequestMapping</li>
<li>类型:方法注解类注解</li>
<li>位置: SpringMVC控制器方法定义上方</li>
<li>作用:设置当前控制器方法请求访问路径，如果设置在类上统一设置当前控制器方法请求访问路径前缀</li>
<li>范例:</li>
<li>属性<ul>
<li>value(默认)∶请求访问路径，或访问路径前缀<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@Controller</span><br><span class="line">@RequestMapping(&quot;/user&quot; )</span><br><span class="line">public class UserController &#123;</span><br><span class="line">@RequestMapping(&quot;/save&quot;)@ResponseBody</span><br><span class="line">    public String save()&#123;</span><br><span class="line">        system.out.print1n(&quot;user save ...&quot;);</span><br><span class="line">        return &quot;&#123;&#x27;module&#x27;:&#x27;user save&#x27;&#125;&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li>
</ul>
</li>
</ul>
<h4 id="3-2请求方式"><a href="#3-2请求方式" class="headerlink" title="3.2请求方式"></a>3.2<strong>请求方式</strong></h4><ul>
<li>Get请求</li>
<li>Post请求<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//乱码处理</span><br><span class="line">@override</span><br><span class="line">protected Filter[] getServletFilters()&#123;</span><br><span class="line">    CharacterEncodingFilter filter = new CharacterEncodingFilter();</span><br><span class="line">    filter.setEncoding(&quot;UTF-8&quot;);</span><br><span class="line">    return new Filter[]&#123;filter&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li>
</ul>
<h4 id="3-3-五种类型参数传值"><a href="#3-3-五种类型参数传值" class="headerlink" title="3.3 五种类型参数传值"></a>3.3 五种类型参数传值</h4><h5 id="3-3-1-普通参数"><a href="#3-3-1-普通参数" class="headerlink" title="3.3.1 普通参数"></a>3.3.1 普通参数</h5><p><em>普通参数：url地址传参，地址参数名与形参变量名相同，定义形参即可接收参数</em><br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.nlark.com/yuque/0/2023/png/34895783/1677121833451-bbcd4063-6868-47ec-99ba-4547178497a7.png#averageHue=%23f9f5ec&clientId=u1270777f-a908-4&from=paste&id=uc1c9b3d0&originHeight=246&originWidth=491&originalType=url&ratio=1.25&rotation=0&showTitle=false&size=63870&status=done&style=none&taskId=u96ad9750-cc57-4679-9369-b788aa466f5&title="
                      alt="image.png"
                ><br>请求参数名与形参变量名不同，使用@RequestParam绑定参数关系<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.nlark.com/yuque/0/2023/png/34895783/1677121833364-2e408a80-57be-4476-bb2f-dbc9611c248d.png#averageHue=%23f9f4ec&clientId=u1270777f-a908-4&from=paste&id=u8f8d32ea&originHeight=255&originWidth=557&originalType=url&ratio=1.25&rotation=0&showTitle=false&size=77801&status=done&style=none&taskId=ucc757256-698e-4447-adfb-4c3141e6375&title="
                      alt="image.png"
                ><br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.nlark.com/yuque/0/2023/png/34895783/1677121833810-a1a9babb-65fd-4b91-b924-b65198512cab.png#averageHue=%23f9f8ef&clientId=u1270777f-a908-4&from=paste&id=uedb639b4&originHeight=456&originWidth=904&originalType=url&ratio=1.25&rotation=0&showTitle=false&size=250115&status=done&style=none&taskId=u45b97f99-da9d-4307-b626-718becd94cd&title="
                      alt="image.png"
                ></p>
<h5 id="3-3-2-POJO参数"><a href="#3-3-2-POJO参数" class="headerlink" title="3.3.2 POJO参数"></a><strong>3.3.2 POJO参数</strong></h5><p>请求参数名与形参对象属性名相同，定义POJO类型参数即可接受参数!<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.nlark.com/yuque/0/2023/png/34895783/1677121833305-892dccc5-ac3a-42dc-9ecf-7f97b1884a83.png#averageHue=%23faf9ef&clientId=u1270777f-a908-4&from=paste&id=u7ece3535&originHeight=359&originWidth=619&originalType=url&ratio=1.25&rotation=0&showTitle=false&size=80557&status=done&style=none&taskId=u7eb5c1b2-c386-4b71-8701-eccf646a087&title="
                      alt="image.png"
                ></p>
<h5 id="3-3-3-嵌套POJO类型参数"><a href="#3-3-3-嵌套POJO类型参数" class="headerlink" title="3.3.3 嵌套POJO类型参数"></a><strong>3.3.3 嵌套POJO类型参数</strong></h5><p>嵌套POJO参数：POJO对象中包含POJO对象<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.nlark.com/yuque/0/2023/png/34895783/1677121833327-3172e910-1569-411f-8605-7869dab9258c.png#averageHue=%23faf9ec&clientId=u1270777f-a908-4&from=paste&id=ue8e5a7ac&originHeight=116&originWidth=640&originalType=url&ratio=1.25&rotation=0&showTitle=false&size=44682&status=done&style=none&taskId=ubf4aa400-059f-42a5-954d-59475b3f281&title="
                      alt="image.png"
                ><br><em>请求参数名与形参对象属性名相同，按照对象层次结构关系即可接受嵌套POJO属性参数</em><br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.nlark.com/yuque/0/2023/png/34895783/1677121834829-732731c2-f6f7-4127-8536-90b5fe23c8c2.png#averageHue=%23f9f7f1&clientId=u1270777f-a908-4&from=paste&id=u7900d13e&originHeight=295&originWidth=639&originalType=url&ratio=1.25&rotation=0&showTitle=false&size=79720&status=done&style=none&taskId=ua57507e7-b67c-4d19-89c3-95f83b43dff&title="
                      alt="image.png"
                ></p>
<h5 id="3-3-4-数组类型参数"><a href="#3-3-4-数组类型参数" class="headerlink" title="3.3.4 数组类型参数"></a>3.3.4 数组类型参数</h5><p><em>请求参数名与形参对象属性名相同且请求参数为多个，定义数组类型参数即可接收参数</em><br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.nlark.com/yuque/0/2023/png/34895783/1677121834837-f142db38-2471-4604-b6b4-8dc4006b9628.png#averageHue=%23f9f7f0&clientId=u1270777f-a908-4&from=paste&id=ubf390daa&originHeight=285&originWidth=585&originalType=url&ratio=1.25&rotation=0&showTitle=false&size=70300&status=done&style=none&taskId=u4e391cb8-5599-4896-91fb-252cdd3cf63&title="
                      alt="image.png"
                ></p>
<h5 id="3-3-5-集合类型参数"><a href="#3-3-5-集合类型参数" class="headerlink" title="3.3.5 集合类型参数"></a><em><strong>3.3.5 集合类型参数</strong></em></h5><p>集合保存普通参数：请求参数名与形参集合对象名相同且请求参数为多个，@RequestParm绑定参数关系<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.nlark.com/yuque/0/2023/png/34895783/1677121834879-0f47e166-2fd5-41f2-a1cb-b4d7086df74e.png#averageHue=%23faf8f0&clientId=u1270777f-a908-4&from=paste&id=u0c43cd5a&originHeight=285&originWidth=641&originalType=url&ratio=1.25&rotation=0&showTitle=false&size=74209&status=done&style=none&taskId=u94900272-6a45-4863-bcea-3585726b17d&title="
                      alt="image.png"
                ></p>
<h4 id="3-4-传递json数据"><a href="#3-4-传递json数据" class="headerlink" title="3.4 传递json数据"></a>3.4 传递json数据</h4><h5 id="3-4-1-json数组"><a href="#3-4-1-json数组" class="headerlink" title="3.4.1 json数组"></a>3.4.1 json数组</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@RequestMapping(&quot;/listParamForJson&quot;)</span><br><span class="line">@ResponseBody</span><br><span class="line">public string listParamForJson(List&lt;String&gt; likes)&#123;</span><br><span class="line">	system.out.println(&quot;list common(json)参数传递 list ==&gt; &quot;+likes);</span><br><span class="line">    return &quot;&#123;&#x27;module&#x27;:&#x27;list common for json param&#x27;&#125;&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<h5 id="3-4-2-json对象-PoJo"><a href="#3-4-2-json对象-PoJo" class="headerlink" title="3.4.2 json对象(PoJo)"></a>3.4.2 json对象(PoJo)</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@RequestMapping(&quot;/pojoParamForson&quot;)</span><br><span class="line">@ResponseBody</span><br><span class="line">public string pojoParamForJson(User user)i</span><br><span class="line">	system.out.println( &quot;pojo(json)参数传递user ==&gt; &quot;+user);</span><br><span class="line">	return &quot;&#123;&#x27;module&#x27;:&#x27;pojo for json param&#x27;&#125;&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<h5 id="3-4-3-json数组-集合参数"><a href="#3-4-3-json数组-集合参数" class="headerlink" title="3.4.3 json数组(集合参数)"></a>3.4.3 json数组(集合参数)</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@RequestMapping(&quot;/listPojoParamForson&quot;)</span><br><span class="line">@ResponseBody</span><br><span class="line">public string listPojoParamForJson( List&lt;User&gt; list)&#123;</span><br><span class="line">	system.out.println(&quot;list pojo(json)参数传递list ==&gt; &quot;+list);</span><br><span class="line">    return &quot;&#123;&#x27;module&#x27;:&#x27;list pojo for json param&#x27;&#125;&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<h4 id="3-5-RequestBody与-RequestParam区别"><a href="#3-5-RequestBody与-RequestParam区别" class="headerlink" title="3.5 @RequestBody与@RequestParam区别"></a>3.5 @RequestBody与@RequestParam区别</h4><ul>
<li>区别<ul>
<li>@RequestParam用于接收url地址传参，表单传参【application&#x2F;x-www-form-urlencoded】</li>
<li>@RequestBody用于接收json数据【application&#x2F;json】</li>
</ul>
</li>
<li>应用<ul>
<li>后期开发中，发送json格式数据为主，@RequestBody应用较广</li>
<li>如果发送非json格式数据，选用@RequestParam接收请求参数</li>
</ul>
</li>
</ul>
<h4 id="3-6-日期类型参数传递"><a href="#3-6-日期类型参数传递" class="headerlink" title="3.6 日期类型参数传递"></a>3.6 日期类型参数传递</h4><ul>
<li><p>日期类型数据基于系统不同格式也不尽相同</p>
<ul>
<li>2088-08-18</li>
<li>2088&#x2F;08&#x2F;18</li>
<li>08&#x2F;18&#x2F;2088</li>
</ul>
</li>
<li><p>接收形参时，根据不同的日期格式设置不同的接收方式</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@RequestMapping(&quot;/dataParam&quot;)</span><br><span class="line">@ResponseBody</span><br><span class="line">public string dataParam(Date date , </span><br><span class="line">@DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;) Date date1, @DateTimeFormat(pattern = &quot;yyyy/MM/dd HH : mm: ss&quot;)Date date2)</span><br><span class="line">&#123;</span><br><span class="line">	system.out.println(&quot;参数传递date ==&gt; &quot;+date);</span><br><span class="line">	System.out.println(&quot;参数传递date(yyyy-MM-dd) ==&gt; &quot;+date1);</span><br><span class="line">	system.out.println(&quot;参数传递date(yyyy/MM/dd HH:mm:ss) ==&gt; &quot;+date2);</span><br><span class="line">    return &quot;&#123;&#x27; module&#x27; : &#x27;data param&#x27; &#125;&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>名称: @DateTimeFormat</p>
</li>
<li><p>类型:<strong>形参注解</strong></p>
</li>
<li><p>位置: SpringMVC控制器方法形参前面</p>
</li>
<li><p>作用:设定日期时间型数据格式</p>
</li>
<li><p>范例:</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@RequestMapping( &quot;/dataParam&quot;)</span><br><span class="line">@ResponseBody</span><br><span class="line">public string dataParam( Date date)&#123;</span><br><span class="line">	system.out.println(&quot;参数传递date ==&gt; &quot;+date);</span><br><span class="line">    return &quot;&#123;&#x27;module&#x27; :&#x27;data param&#x27;&#125;&quot; ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>属性: pattern : 日期时间格式字符串</p>
</li>
</ul>
<h4 id="3-6-类型转换器"><a href="#3-6-类型转换器" class="headerlink" title="3.6 类型转换器"></a>3.6 类型转换器</h4><ul>
<li><p>Converter接口</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public interface Converter&lt;S，T&gt; &#123;</span><br><span class="line">	@Nullable</span><br><span class="line">	T convert(s var1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>请求参数年龄数据(String-Integer)</p>
</li>
<li><p>日期格式转换(String → Date)</p>
</li>
</ul>
<h3 id="4-响应"><a href="#4-响应" class="headerlink" title="4 响应"></a>4 响应</h3><p>&#x2F;&#x2F;响应页面&#x2F; 跳转页面</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@RequestMapping(&quot;/toJumpPage&quot;)</span><br><span class="line">public string toJumpPage()&#123;</span><br><span class="line">	System.out.println(&quot;跳转页面&quot;);</span><br><span class="line">    return &quot;page.jsp&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>&#x2F;&#x2F;响应文本数据</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@RequestMapping(&quot;/toText&quot;)</span><br><span class="line">public string toText( )&#123;</span><br><span class="line">	System.out.println(&quot;返回纯文本数据&quot;);</span><br><span class="line">    return &quot;response text&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>&#x2F;&#x2F;响应Pojo对象</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@RequestMapping(&quot;/toJsonPOJO&quot;)</span><br><span class="line">@ResponseBody</span><br><span class="line">public User tojsonPojo()&#123;</span><br><span class="line">	System.out.print1n(&quot;返回json对象数据&quot;);</span><br><span class="line">  User user = new User( );</span><br><span class="line">	user.setName( &quot;itcast&quot;);</span><br><span class="line">  user.setAge( 15);</span><br><span class="line">	return user;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>&#x2F;&#x2F;响应POJO集合对象</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">@RequestMapping(&quot;/tosonList&quot;)</span><br><span class="line">@ResponseBody</span><br><span class="line">public List&lt;User&gt; toJsonList()i</span><br><span class="line">	System.out.print1n(&quot;返回json集合数据&quot;);</span><br><span class="line">	User user1 = new User();</span><br><span class="line">	user1.setName(&quot;传智播客&quot;);</span><br><span class="line">	user1.setAge(15);</span><br><span class="line">	User user2 = new User();</span><br><span class="line">	user2.setName(&quot;黑马程序员&quot;);</span><br><span class="line">	user2.setAge(12);</span><br><span class="line">	List&lt;User&gt; userList = new ArrayList&lt;~&gt;();</span><br><span class="line">	userList.add(user1);</span><br><span class="line">	userList.add(user2);</span><br><span class="line">	return userList;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>名称: @ResponseBody</li>
<li>类型:<strong>方法注解</strong></li>
<li>位置: SpringMVc控制器方法定义上方</li>
<li>作用:设置当前控制器返回值作为响应体</li>
<li>范例<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@RequestMapping(&quot;/save&quot;)</span><br><span class="line">@ResponseBody</span><br><span class="line">public String save()&#123;</span><br><span class="line">	System.out.print1n(&quot;save.. .&quot;);</span><br><span class="line">    return &quot;&#123;&#x27;info&#x27;:&#x27;springmvc&#x27;&#125;&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<strong>HttpMessageConverter</strong> 接口</li>
</ul>
<h3 id="5-REST风格"><a href="#5-REST风格" class="headerlink" title="5 REST风格"></a>5 REST风格</h3><p>按照REST风格访问资源时使用行为动作区分对资源进行了何种操作<br>http: &#x2F;&#x2F;localhost&#x2F;users 					 查询全部用户信息GET(查询)http: &#x2F;&#x2F;localhost&#x2F;users&#x2F;1					查询指定用户信息GET(查询)http: &#x2F;&#x2F;localhost&#x2F;users 						添加用户信息 POST(新增&#x2F;保存)http: &#x2F;&#x2F;localhost&#x2F;users						修改用户信息PUT(修改&#x2F;更新)<a class="link"   target="_blank" rel="noopener" href="http://localhost/users/1" >http://localhost/users/1 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>						 删除用户信息DELETE (删除)</p>
<h4 id="5-1-RESTful入门案列"><a href="#5-1-RESTful入门案列" class="headerlink" title="5.1 RESTful入门案列"></a>5.1 RESTful入门案列</h4><p>1.设定http请求动作（动词）</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@RequestMapping(value = &quot;/users&quot;,method = RequestMethod.POST)</span><br><span class="line">@ResponseBody</span><br><span class="line">public string save(@RequestBody User user)&#123;</span><br><span class="line">	System.out.println(&quot;user save. . .&quot; + user) ;</span><br><span class="line">    return &quot;&#123;&#x27;module&#x27;:&#x27;user save&#x27;&#125;&quot;;</span><br><span class="line">@RequestMapping(value = &quot;/users&quot; ,method = RequestMethod.PUT)</span><br><span class="line">@ResponseBody</span><br><span class="line">public string update(@RequestBody User user)&#123;</span><br><span class="line">	System.out.print1n(&quot;user update. . . &quot;+user);</span><br><span class="line">    return &quot;&#123;&#x27;module&#x27;:&#x27;user update&#x27;&#125;&quot; ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>2.设定请求参数（路径变量）</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@RequestMapping(value = &quot;/users/&#123;id&#125;&quot;,method = RequestMethod.DELETE)</span><br><span class="line">@ResponseBody</span><br><span class="line">public string delete(@PathVariable Integer id)&#123;</span><br><span class="line">	System.out.println(&quot;user delete. . .&quot; + id);</span><br><span class="line">    return &quot;&#123;&#x27;module&#x27;:&#x27;user delete&#x27;&#125;&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>@RequestBody				 @RequestParam @PathVariable</p>
<ul>
<li>区别<ul>
<li>@RequestParam<strong>用于接收url地址传参或表单传参</strong></li>
<li>@RequestBody<strong>用于接收json数据</strong></li>
<li>@PathVariable<strong>用于接收路径参数</strong>，使用{参数名称}描述路径参数0</li>
</ul>
</li>
<li>应用<ul>
<li>后期开发中，发送请求参数超过1个时，<strong>以json格式为主</strong>，@RequestBody应用较广</li>
<li>如果发送非json格式数据，选用@RequestParam接收请求参数</li>
<li>采用RESTful进行开发，当参数数量较少时，例如1个，可以采用@PathVariable接收请求路径变量，通常用于传递id值</li>
</ul>
</li>
</ul>
<h3 id="6-基本注解"><a href="#6-基本注解" class="headerlink" title="6 基本注解"></a>6 基本注解</h3><p>@Controller 声明Controller组件，通常作用在控制层（如 Spring MVC 的 Controller），用于将控制层的类标识为 Spring 中的 Bean，其功能与 @Component 相同。<br>@Service 声明Service组件 @Service(“myMovieLister”) ，通常作用在业务层（Service 层），用于将业务层的类标识为 Spring 中的 Bean，其功能与 @Component 相同。<br>@Repository 声明Dao组件，将数据访问层（DAO 层）的类标识为 Spring 中的 Bean，其功能与 @Component 相同。<br>@Component泛指组件, 可以使用此注解描述 Spring 中的 Bean，但它是一个泛化的概念，仅仅表示一个组件（Bean），并且可以作用在任何层次。使用时只需将该注解标注在相应类上即可。<br>@RequestMapping(“&#x2F;menu”)请求映射，用于映射url到控制器类或一个特定的处理程序方法。可用于类或方法上。用于类上，表示类中的所有响应请求的方法都是以该地址作为父路径。<br>@GetMapping：它是 @RequestMapping(method &#x3D;RequestMethod.GET) 的一个快捷方式，只能处理 Get 类型请求。<br>@PostMapping:它是 @RequestMapping(method &#x3D;RequestMethod.POST) 的一个快捷方式，只能处理 Post类型请求。<br>@Resource用于注入，( j2ee提供的 ) 默认按名称装配@Resource(name&#x3D;“beanName”)<br>@Autowired 用于注入，(spring提供的) 默认按类型装配<br>@Transactional( rollbackFor&#x3D;{Exception.class}) 事务管理<br>@RequestBody：注解实现接收http请求的json数据，将json转换为java对象。<br>@ResponseBody：注解实现将controller方法返回对象转化为json对象响应给客户。<br>@Scope(“prototype”) 设定bean的作用域<br>@RequestParam ：将请求参数绑定到控制器的方法参数上<br>@Configuration：声明当前类为配置类，相当于 xml 形式的 Spring 配置中的，该注解需要添加到类上。</p>
<h3 id="7-SpringMVC处理ajax请求"><a href="#7-SpringMVC处理ajax请求" class="headerlink" title="7.SpringMVC处理ajax请求"></a>7.SpringMVC处理ajax请求</h3><h4 id="7-1-RequestBody"><a href="#7-1-RequestBody" class="headerlink" title="7.1 @RequestBody"></a>7.1 @RequestBody</h4><p>@RequestBody可以获取请求体信息，使用@RequestBody注解标识控制器方法的形参，当前请求的请求体就会为当前注解所标识的形参赋值</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--此时必须使用post请求方式，因为get请求没有请求体--&gt;</span><br><span class="line">&lt;form th: action=&quot;a&#123;/test/RequestBody&#125;&quot; method=&quot;post&quot;&gt;</span><br><span class="line">	用户名:&lt;input type=&quot;text&quot; name=&quot;username&quot;&gt;&lt;br&gt;</span><br><span class="line">  密码:&lt;input type=&quot;password&quot; name=&quot;password&quot;&gt;&lt;br&gt;</span><br><span class="line">  &lt;input type=&quot;submit&quot;&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure></div>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@RequestMapping(&quot;/test/RequestBody&quot;)</span><br><span class="line">public string testRequestBody(@RequestBody string requestBody)&#123;</span><br><span class="line">  System.out.print1n(&quot;requestBody : &quot;+requestBody) ;</span><br><span class="line">  return &quot;success&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>1.@RequestBody :将请求体中的内容和控制器方法的形参进行绑定<br>2.使用@RequestBody注解将json格式的请求参数转换为java对象<br>a&gt;导入jackson的依赖b&gt;在springMVC的配置文件中设置&lt;mvc:annotation-driven&#x2F; &gt;c&gt;在处理请求的控制器方法的形参位置，直接设置json格式的请求参数要转换的java类型的形参，使用@RequestBody注解标识。<br>3.@ResponseBody:将所标识的控制器方法的返回值作为响应报文的响应体响应到浏览器<br>4.使用@ResponseBody注解响应浏览器json格式的数据<br>a&gt;导入jackson的依赖b&gt;在springMVC的配置文件中设置&lt;mvc:annotation-driven&#x2F; &gt;<br>c&gt;将需要转换为json字符串的java对象直接作为控制器方法的返回值，使用@ResponseBody注解标识控制器方法就可以将java对象直接转换为json字符串，并响应到浏览器<br>常用的7ava对象转换为json的结集:<br>实体类–&gt;json对象map–&gt;json对象<br>list–&gt;json数组</p>
<h4 id="7-2、RestController注解"><a href="#7-2、RestController注解" class="headerlink" title="7.2、RestController注解"></a>7.2、RestController注解</h4><p>@RestController注解是springMVC提供的一个复合注解，标识在控制器的类上，就相当于为类添加了@Controller注解，并且为其中的每个方法添加了@ResponseBody注解</p>
<h3 id="8-域对象共享数据"><a href="#8-域对象共享数据" class="headerlink" title="8.域对象共享数据."></a>8.域对象共享数据.</h3><h4 id="8-1-使用ServletAPI向request域对象共享数据"><a href="#8-1-使用ServletAPI向request域对象共享数据" class="headerlink" title="8.1 使用ServletAPI向request域对象共享数据"></a>8.1 使用ServletAPI向request域对象共享数据</h4><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@RequestMapping(&quot;/testservletAPI&quot;)</span><br><span class="line">public string testServletAPI(HttpServletRequest request)&#123;</span><br><span class="line">request.setAttribute(&quot;testscope&quot;，&quot;he1lo,servletAPI&quot;);</span><br><span class="line">  return &quot;success&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<h4 id="8-2-使用ModelAndView向request域对象共享数据"><a href="#8-2-使用ModelAndView向request域对象共享数据" class="headerlink" title="8.2 使用ModelAndView向request域对象共享数据"></a>8.2 使用ModelAndView向request域对象共享数据</h4><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@RequestMapping(&quot;/testMode1Andview&quot;)</span><br><span class="line">public Mode1AndView testMode1Andview(&#123;</span><br><span class="line">/**</span><br><span class="line">*Mode1Andview有Mode1和view的功能Mode1主要用于向请求域共享数据</span><br><span class="line">*view主要用于设置视图，实现页面跳转*/</span><br><span class="line">	ModelAndView mav = new Mode1Andview();</span><br><span class="line">  //向请求域共享数据</span><br><span class="line">	mav.addObject(&quot;testscope&quot;,&quot;he11o,ModelAndView&quot;);</span><br><span class="line">  //设置视图，实现页面跳转</span><br><span class="line">	mav.setViewName( &quot;success &quot;);</span><br><span class="line">  return mav;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<h3 id="9-文件上传和下载"><a href="#9-文件上传和下载" class="headerlink" title="9.文件上传和下载"></a>9.文件上传和下载</h3><h4 id="9-1-文件下载"><a href="#9-1-文件下载" class="headerlink" title="9.1 文件下载"></a>9.1 文件下载</h4><p>ResponseEntity用于控制器方法的返回值类型，该控制器方法的返回值就是响应到浏览器的响应报文<br>使用ResponseEntity实现下载文件的功能</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">@RequestMapping(&quot;/testDown&quot;)</span><br><span class="line">@RequestMapping(&quot;/test/down&quot;)</span><br><span class="line">    public ResponseEntity&lt;byte[]&gt; testResponseEntity(HttpSession session) throws IOException</span><br><span class="line">    &#123;</span><br><span class="line">        //获取servletcontext对象</span><br><span class="line">        ServletContext servletContext = session.getServletContext();</span><br><span class="line">        //获取服务器中文件的真实路径</span><br><span class="line">        String realPath = servletContext.getRealPath(&quot;/static/img/1.jpg&quot;);</span><br><span class="line">        //创建输入流</span><br><span class="line">        InputStream is = new FileInputStream(realPath) ;</span><br><span class="line">        //创建字节数组</span><br><span class="line">        byte[] bytes = new byte[is.available()];</span><br><span class="line">        //将流读到字节数组中</span><br><span class="line">        is.read(bytes) ;</span><br><span class="line">        //创建HttpHeaders对象设置响应头信息</span><br><span class="line">        MultiValueMap&lt;String,String&gt; headers = new HttpHeaders();</span><br><span class="line">        //设置要下载方式以及下载文件的名字</span><br><span class="line">        headers.add(&quot;content-Disposition&quot;,&quot;attachment;filename=1.jpg&quot;);</span><br><span class="line">        //设置响应状态码</span><br><span class="line">        HttpStatus statusCode = HttpStatus.OK;</span><br><span class="line">        //创建ResponseEntity对象</span><br><span class="line">        ResponseEntity&lt;byte[]&gt; responseEntity = new ResponseEntity&lt;&gt;(bytes,headers,statusCode) ;</span><br><span class="line">        //关闭输入流</span><br><span class="line">        is.close();</span><br><span class="line">        return responseEntity;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div>
<h4 id="9-2-文件上传"><a href="#9-2-文件上传" class="headerlink" title="9.2 文件上传"></a>9.2 文件上传</h4><p>文件上传要求form表单的请求方式必须为post，并且添加属性enctype&#x3D;”multipart&#x2F;form-data”SpringMVC中将上传的文件封装到MultipartFile对象中，通过此对象可以获取文件相关信息<br>上传步骤：<br>①添加依赖：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;commons-fileupload&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;commons-fileupload&lt;/artifactId&gt;</span><br><span class="line">  &lt;version&gt;1.3.3&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure></div>
<p>②在springmvc.xml中配置文件上传解析器</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--配置文件上传解析器--&gt;</span><br><span class="line">&lt;bean id=&quot;multipartResolver&quot; class=&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure></div>
<p>③文件上传</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">//获取上传的文件的文件名</span><br><span class="line">        String filename = photo.getOriginalFilename();</span><br><span class="line">       //获取上传的文件的后缀名</span><br><span class="line">        String hzname = filename.substring(filename.lastIndexOf(&quot;.&quot;));</span><br><span class="line">        //获取uuid</span><br><span class="line">        String uuid = UUID.randomUUID().toString();</span><br><span class="line">        //拼接一个新的文件名</span><br><span class="line">        filename = uuid + hzname;</span><br><span class="line">        System.out.println(filename);</span><br><span class="line">        //获取ServletContext对象</span><br><span class="line">        ServletContext servletContext = session.getServletContext();</span><br><span class="line">        //获取当前工程下photo目录的真实路径</span><br><span class="line">        String photoPath = servletContext.getRealPath(&quot;photo&quot;);</span><br><span class="line">        //传教photoPath所对应的File对象</span><br><span class="line">        File file = new File(photoPath);</span><br><span class="line">        //判断file所对应的目录是否存在</span><br><span class="line">        if (!file.exists())&#123;</span><br><span class="line">            file.mkdir();</span><br><span class="line">        &#125;</span><br><span class="line">        String finalPath = photoPath + File.separator + filename;</span><br><span class="line">        //上传文件</span><br><span class="line">        photo.transferTo(new File(finalPath));</span><br><span class="line">        return &quot;success&quot;;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div>
<h3 id="10-拦截器"><a href="#10-拦截器" class="headerlink" title="10 拦截器"></a>10 拦截器</h3><h4 id="10-1、拦截器的配置"><a href="#10-1、拦截器的配置" class="headerlink" title="10.1、拦截器的配置"></a>10.1、拦截器的配置</h4><p>SpringMVC中的拦截器用于拦截控制器方法的执行<br>springMVC中的拦截器需要实现Handlerlnterceptor<br>SpringMVC的拦截器必须在SpringMVC的配置文件中进行配置:<br>过滤器：在浏览器和目标资源进行过滤</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;mvc:interceptors&gt;</span><br><span class="line">        &lt;!--bean和ref标签所配置的拦截器默认对DispatcherservLet处理的所有的请求进行拦截--&gt;</span><br><span class="line">        &lt;!--&lt;bean class=&quot;com.atguigu.interceptor.FirstInterceptor&quot; /&gt;--&gt;</span><br><span class="line">        &lt;!--&lt;ref bean=&quot;firstInterceptor”/E-&gt;</span><br><span class="line">    &lt;mvc:interceptor&gt;</span><br><span class="line">        &lt;! -配置需要拦截的请求的请求路径，/**表示所有请求--&gt;</span><br><span class="line">        &lt;mvc:mapping path=&quot;/**&quot;/&gt;</span><br><span class="line">        &lt;!--配置需要排除拦截的请求的请求路径--&gt;</span><br><span class="line">        &lt;mvc:exclude-mapping path=&quot;/abc&quot;/&gt;&lt;!--配置拦截器--&gt;</span><br><span class="line">        &lt;ref bean=&quot;firstInterceptor&quot;/&gt;</span><br><span class="line">       &lt;/mvc:interceptor&gt;</span><br><span class="line">    &lt;/mvc:interceptors&gt;</span><br></pre></td></tr></table></figure></div>
<h4 id="10-2、拦截器的三个抽象方法"><a href="#10-2、拦截器的三个抽象方法" class="headerlink" title="10.2、拦截器的三个抽象方法"></a>10.2、拦截器的三个抽象方法</h4><p>preHandle():在控制器方法执行之前执行，其返回值表示对控制器方法的拦截(False)或放行(true)<br>postHandle( ):在控制器方法执行之后执行<br>aftercompletion():在控制器方法执行之后，且渲染视图完毕之后执行</p>
<h3 id="11-使用类替代web-xml"><a href="#11-使用类替代web-xml" class="headerlink" title="11.使用类替代web.xml"></a>11.使用类替代web.xml</h3><p>WebConfig类</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * @Author Wang</span><br><span class="line"> * @Date 2023 01 05 18 49</span><br><span class="line"> * Description:代替springmvc的配置文件</span><br><span class="line"> * 扫描组件、视图解析器、默认的servlet、mvc的注解驱动</span><br><span class="line"> * 视图控制器、文件上传解析器、拦截器、异常解析器</span><br><span class="line"> **/</span><br><span class="line"></span><br><span class="line">//将类标识为配置类</span><br><span class="line">@Configuration</span><br><span class="line">//扫描组件</span><br><span class="line">@ComponentScan(&quot;com.wjp.controller&quot;)</span><br><span class="line">//开启mvc的注解驱动</span><br><span class="line">@EnableWebMvc</span><br><span class="line">public class WebConfig implements WebMvcConfigurer &#123;</span><br><span class="line">    @Override</span><br><span class="line">    //默认的servlet处理静态资源</span><br><span class="line">    public void configureDefaultServletHandling(DefaultServletHandlerConfigurer configurer) &#123;</span><br><span class="line">            configurer.enable();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    //配置视图解析器</span><br><span class="line">    public void addViewControllers(ViewControllerRegistry registry) &#123;</span><br><span class="line">        registry.addViewController(&quot;/&quot;).setViewName(&quot;index&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Bean</span><br><span class="line">    //@Bean注解可以将标识的方法的返回值作为bean进行管理</span><br><span class="line">    public CommonsMultipartResolver multipartResolver()&#123;</span><br><span class="line">        return new CommonsMultipartResolver();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    //拦截器</span><br><span class="line">    public void addInterceptors(InterceptorRegistry registry) &#123;</span><br><span class="line">        FirstInterceptor firstInterceptor = new FirstInterceptor();</span><br><span class="line">        registry.addInterceptor(firstInterceptor).addPathPatterns(&quot;/**&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    //配置异常解析器</span><br><span class="line">    public void configureHandlerExceptionResolvers(List&lt;HandlerExceptionResolver&gt; resolvers) &#123;</span><br><span class="line">        SimpleMappingExceptionResolver exceptionResolver = new SimpleMappingExceptionResolver();</span><br><span class="line">        Properties prop = new Properties();</span><br><span class="line">        prop.setProperty(&quot;java.lang.ArithmeticException&quot;,&quot;error&quot;);</span><br><span class="line">        exceptionResolver.setExceptionMappings(prop);</span><br><span class="line">        exceptionResolver.setExceptionAttribute(&quot;ex&quot;);</span><br><span class="line">        resolvers.add(exceptionResolver);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //配置生成模板解析器</span><br><span class="line">    @Bean</span><br><span class="line">    public ITemplateResolver templateResolver()&#123;</span><br><span class="line">        WebApplicationContext webApplicationContext = ContextLoader.getCurrentWebApplicationContext();</span><br><span class="line">        //serv1etcontextTemplateResolver需要一个servletContext作为构造参数，可通过webApplicationcontext的方法获得</span><br><span class="line">        ServletContextTemplateResolver templateResolver = new ServletContextTemplateResolver(webApplicationContext.getServletContext());</span><br><span class="line">        templateResolver.setPrefix(&quot;/WEB-INF/template/&quot;);</span><br><span class="line">        templateResolver.setSuffix(&quot;.html&quot;);</span><br><span class="line">        templateResolver.setCharacterEncoding(&quot;UTF-8&quot;);</span><br><span class="line">        templateResolver.setTemplateMode(TemplateMode.HTML);</span><br><span class="line">        return templateResolver;</span><br><span class="line">    &#125;</span><br><span class="line">    //生成模板引擎并为模板引擎注入模板解析器Bean</span><br><span class="line">    public SpringTemplateEngine templateEngine(ITemplateResolver templateResolver)&#123;</span><br><span class="line">        SpringTemplateEngine templateEngine = new SpringTemplateEngine() ;</span><br><span class="line">        templateEngine.setTemplateResolver (templateResolver);</span><br><span class="line">        return templateEngine;</span><br><span class="line">    &#125;</span><br><span class="line">    //生成视图解析器并未解析器注入模板引擎Bean</span><br><span class="line">    public ViewResolver viewResolver(SpringTemplateEngine templateEngine) &#123;</span><br><span class="line">        ThymeleafViewResolver viewResolver = new ThymeleafViewResolver ();</span><br><span class="line">        viewResolver.setCharacterEncoding(&quot;UTF-8&quot;);</span><br><span class="line">        viewResolver .setTemplateEngine(templateEngine);</span><br><span class="line">        return viewResolver;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>WebInit类</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * @Author Wang</span><br><span class="line"> * @Date 2023 01 05 18 46</span><br><span class="line"> * Description: 代替web.xml</span><br><span class="line"> **/</span><br><span class="line">public class WebInit extends AbstractAnnotationConfigDispatcherServletInitializer&#123;</span><br><span class="line">    @Override</span><br><span class="line">    /*设置一个配置类，来代替spring的配置文件*/</span><br><span class="line">    protected Class&lt;?&gt;[] getRootConfigClasses() &#123;</span><br><span class="line">        return new Class[]&#123;SpringConfig.class&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    //设置一个配置类代替springmvc的配置文件</span><br><span class="line">    protected Class&lt;?&gt;[] getServletConfigClasses() &#123;</span><br><span class="line">        return new Class[]&#123;WebConfig.class&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    //设置springmvc的前端控制器DispatcherServlet的url-pattern</span><br><span class="line">    protected String[] getServletMappings() &#123;</span><br><span class="line">        return new String[]&#123;&quot;/&quot;&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    //设置当前的过滤器</span><br><span class="line">    protected Filter[] getServletFilters() &#123;</span><br><span class="line">        //创建编码过滤器</span><br><span class="line">        CharacterEncodingFilter characterEncodingFilter = new CharacterEncodingFilter();</span><br><span class="line">        characterEncodingFilter.setEncoding(&quot;UTF-8&quot;);</span><br><span class="line">        characterEncodingFilter.setForceEncoding(true);</span><br><span class="line">        //处理请求方式的过滤器</span><br><span class="line">        HiddenHttpMethodFilter hiddenHttpMethodFilter = new HiddenHttpMethodFilter();</span><br><span class="line">        return new Filter[]&#123;characterEncodingFilter,hiddenHttpMethodFilter&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>TestController类</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public class TestController implements HandlerInterceptor &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception &#123;</span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) throws Exception &#123;</span><br><span class="line">        HandlerInterceptor.super.postHandle(request, response, handler, modelAndView);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception &#123;</span><br><span class="line">        HandlerInterceptor.super.afterCompletion(request, response, handler, ex);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<h3 id="12-SpringMVC执行流程"><a href="#12-SpringMVC执行流程" class="headerlink" title="12 SpringMVC执行流程"></a>12 SpringMVC执行流程</h3><h4 id="12-1-SpringMVC常用组件SpringMVC常用组件"><a href="#12-1-SpringMVC常用组件SpringMVC常用组件" class="headerlink" title="12.1 SpringMVC常用组件SpringMVC常用组件"></a>12.1 SpringMVC常用组件SpringMVC常用组件</h4><ul>
<li>DispatcherServlet:前端控制器，不需要工程师开发，由框架提供作用:统一处理请求和响应，整个流程控制的中心，由它调用其它组件处理用户的请求。</li>
<li>HandlerMapping:处理器映射器，不需要工程师开发，由框架提供作用:根据请求的url、method等信息查找Handler，即控制器方法。</li>
<li>Handler:处理器，需要工程师开发作用:在DispatcherServlet的控制下Handler对具体的用户请求进行处理. </li>
<li>HandlerAdapter:处理器适配器，不需要工程师开发，由框架提供。作用:通过HandlerAdapter对处理器(控制器方法）进行执行</li>
<li>ViewResolver:视图解析器，不需要工程师开发，由框架提供作用:进行视图解析，得到相应的视图，例如:ThymeleafView、InternalResourceView、RedirectView。</li>
<li>View:视图作用:将模型数据通过页面展示给用户。</li>
</ul>
<h4 id="12-2-执行流程"><a href="#12-2-执行流程" class="headerlink" title="12.2 执行流程"></a>12.2 执行流程</h4><p>1)用户向服务器发送请求，请求被SpringMVC前端控制器DispatcherServlet捕获。<br>2)DispatcherServlet对请求URL进行解析，得到请求资源标识符(URI)，判断请求URI对应的映射:<br>a)不存在i.再判断是否配置了mvc:default-servlet-handlerii.如果没配置，则控制台报映射查找不到，客户端展示404错误<br>ili.如果有配置，则访问目标资源（一般为静态资源，如:JS.CSS,HTML)，找不到客户端也会展示404错误<br>b)存在则执行下面的流程3)根据该URI，调用HandlerMapping获得该Handler配置的所有相关的对象（包括Handler对象以及Handler对$对应的拦截器)，最后以HandlerExecutionChain执行链对象的形式返回。<br>4)DispatcherServlet根据获得的Handler，选择一个合适的HandlerAdapter。5)如果成功获得HandlerAdapter，此时将开始执行拦截器的preHandler(…)方法【正向】6)提取Request中的模型数据，填充Handler入参，开始执行Handler (Controller)方法，处理请求。在填充Handler的入参过程中，根据你的配置，Spring将帮你做一些额外的工作;a) HttpMessageConveter:将请求消息(如son、xml等数据）转换成一个对象，将对象转换为指定的响应信息<br>b)数据转换:对请求消息进行数据转换。如String转换成Integer、Double等<br>c)数据格式化:对请求消息进行数据格式化。如将字符串转换成格式化数字或格式化日期等<br>d)数据验证:验证数据的有效性（长度、格式等)，验证结果存储到BindingResult或Error中<br>7)Handler执行完成后，向DispatcherServlet返回一个ModelAndView对象。<br>8)此时将开始执行拦截器的postHandle(…)方法【逆向】。9)根据返回的ModelAndView (此时会判断是否存在异常:如果存在异常，则执行HandlerExceptionResolver进行异常处理)选择一个适合的ViewResolver进行视图解析，根据Model和View，来渲染视图。10)渲染视图完毕执行拦截器的afterCompletion(…)方法【逆向】。11)将渲染结果返回给客户端。</p>
<h1 id="SSM整合流程"><a href="#SSM整合流程" class="headerlink" title="SSM整合流程"></a>SSM整合流程</h1><p>1.创建工程</p>
<p>2.ssm整合</p>
<ul>
<li><strong>Spring</strong> <ul>
<li><strong>SpringConfig</strong></li>
</ul>
</li>
<li><strong>Mybatis</strong> <ul>
<li><strong>MybatisConfig</strong></li>
<li><strong>JdbcConfig</strong></li>
<li><strong>jdbc.properties</strong></li>
</ul>
</li>
<li><strong>SpringMVC</strong> <ul>
<li><strong>ServletConfig</strong></li>
<li><strong>SpringMvcConfig</strong></li>
</ul>
</li>
</ul>
<p>3.功能模块</p>
<ul>
<li>表与实体类-</li>
<li>dao（接口+自动代理)</li>
<li>service(接口+实现类) <ul>
<li>业务层接口测试（整合JUnit )</li>
</ul>
</li>
<li>controller <ul>
<li>表现层接口测试( PostMan )</li>
</ul>
</li>
</ul>
<h1 id="异常处理器"><a href="#异常处理器" class="headerlink" title="异常处理器"></a>异常处理器</h1><ul>
<li>出现异常现象的常见位置与常见诱因如下: <ul>
<li>框架内部抛出的异常:因使用不合规导致</li>
<li>数据层抛出的异常:因外部服务器故障导致（例如:服务器访问超时)</li>
<li>业务层抛出的异常:因业务逻辑书写错误导致（例如:遍历业务书写操作，导致索引异常等)</li>
<li>表现层抛出的异常:因数据收集、校验等规则导致（例如:不匹配的数据类型间导致异常)</li>
<li>工具类抛出的异常:因工具类书写不严谨不够健壮导致（例如:必要释放的连接长期未释放等)</li>
</ul>
</li>
</ul>
<p>集中的、统一的处理项目中出现的异常</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProjectExceptionAdvice</span> &#123;</span><br><span class="line">	<span class="meta">@ExceptionHandler(Exception.class)</span></span><br><span class="line">	<span class="keyword">public</span> Result <span class="title function_">doException</span><span class="params">(Exception ex)</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>(<span class="number">666</span>,<span class="literal">null</span>,<span class="string">&quot;异常&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<ul>
<li><p>项目异常分类 </p>
<ul>
<li>业务异常(BusinessException) <ul>
<li>规范的用户行为产生的异常</li>
<li>不规范的用户行为操作产生的异常</li>
</ul>
</li>
<li>系统异常(SystemException) <ul>
<li>项目运行过程中可预计且无法避免的异常</li>
</ul>
</li>
<li>其他异常(Exception) <ul>
<li>编程人员未预期到的异常</li>
</ul>
</li>
</ul>
</li>
<li><p>SpringMVC技术与servlet技术功能等同，均属于web层开发技术</p>
</li>
<li><pre><code>SpringMVC是一种基于Java实现MVC模型的轻量级web框架
</code></pre>
</li>
<li><p>优点 </p>
<ul>
<li>使用简单，开发便捷（相比于Servlet)</li>
<li>灵活性强</li>
</ul>
</li>
</ul>
<p>1.掌握基于springMVC获取请求参数与响应json数据操作<br>2.熟练应用基于REST风格的请求路径设置与参数传递<br>3.能够根据实际业务建立前后端开发通信协议并进行实现<br>4.基于SSM整合技术开发任意业务模块功能</p>
<p>注:三层架构分为表述层(或表示层)、业务逻辑层、数据访问层，表述层表示前台页面和后台servlet<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.nlark.com/yuque/0/2023/png/34895783/1678673426568-cace7064-d4be-4719-83ef-381d90e7a690.png#averageHue=%23f2e3e0&clientId=u62bbec2a-5fc6-4&from=ui&id=u69ab12fe&originHeight=587&originWidth=1058&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=94143&status=done&style=none&taskId=ub0770b78-9c9b-480a-81ef-d4adaf6d8e3&title="
                      alt="image-20221124160144022.png"
                ></p>
<h3 id="2-启动服务器初始化过程-1"><a href="#2-启动服务器初始化过程-1" class="headerlink" title="2.启动服务器初始化过程"></a>2.启动服务器初始化过程</h3><p>1． 服务器启动，执行ServletContainersInitConfig类，初始化web容器</p>
<p>2．执行createServletApplicationContext方法，创建了WebApplicationContext对象</p>
<p>3．加载SpringMvcConfig</p>
<p>4．执行@ComponentScan加载对应的bean</p>
<p>5．加载UserController，每个@RequestMapping的名称对应一个具体的方法</p>
<p>6．执行getServletMappings方法，定义所有的请求都通过SpringMVC</p>
<ul>
<li><strong>单次请求过程</strong></li>
</ul>
<ol>
<li>发送请求localhost&#x2F;save </li>
<li>web容器发现所有请求都经过SpringMVc，将请求交给springMVC处理 </li>
<li>解析请求路径&#x2F;save </li>
<li>由&#x2F;save匹配执行对应的方法save() </li>
<li>执行save() </li>
<li>检测到有@ResponseBody直接将save()方法的返回值作为响应体返回给请求方</li>
</ol>
<h3 id="3-请求与响应-1"><a href="#3-请求与响应-1" class="headerlink" title="3.请求与响应"></a>3.请求与响应</h3><h4 id="3-1请求映射路径-1"><a href="#3-1请求映射路径-1" class="headerlink" title="3.1请求映射路径"></a>3.1<strong>请求映射路径</strong></h4><ul>
<li><p>名称:<a href="/RequestMapping">@RequestMapping </a>  </p>
</li>
<li><p>类型:方法注解类注解 </p>
</li>
<li><p>位置: SpringMVC控制器方法定义上方 </p>
</li>
<li><p>作用:设置当前控制器方法请求访问路径，如果设置在类上统一设置当前控制器方法请求访问路径前缀 </p>
</li>
<li><p>范例: </p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot; )</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"><span class="meta">@RequestMapping(&quot;/save&quot;)</span><span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">save</span><span class="params">()</span>&#123;</span><br><span class="line">        system.out.print1n(<span class="string">&quot;user save ...&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;user save&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

</li>
<li><p>属性 </p>
<ul>
<li>value(默认)∶请求访问路径，或访问路径前缀</li>
</ul>
</li>
</ul>
<h4 id="3-2请求方式-1"><a href="#3-2请求方式-1" class="headerlink" title="3.2请求方式"></a>3.2<strong>请求方式</strong></h4><ul>
<li>Get请求 </li>
<li>Post请求 <div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//乱码处理</span></span><br><span class="line"><span class="meta">@override</span></span><br><span class="line"><span class="keyword">protected</span> Filter[] getServletFilters()&#123;</span><br><span class="line">    <span class="type">CharacterEncodingFilter</span> <span class="variable">filter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CharacterEncodingFilter</span>();</span><br><span class="line">    filter.setEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Filter</span>[]&#123;filter&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li>
</ul>
<h4 id="3-3-五种类型参数传值-1"><a href="#3-3-五种类型参数传值-1" class="headerlink" title="3.3 五种类型参数传值"></a>3.3 五种类型参数传值</h4><h5 id="3-3-1-普通参数-1"><a href="#3-3-1-普通参数-1" class="headerlink" title="3.3.1 普通参数"></a>3.3.1 普通参数</h5><p><em>普通参数：url地址传参，地址参数名与形参变量名相同，定义形参即可接收参数</em></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://img-blog.csdnimg.cn/ee826bb9090f4eb4bd733cafff6f7767.png#id=cvjaj&originHeight=246&originWidth=491&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title="
                     
                ></p>
<p>请求参数名与形参变量名不同，使用@RequestParam绑定参数关系<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://img-blog.csdnimg.cn/9718ef925d4c4e91bddb92d6352aad93.png#id=vO6TU&originHeight=255&originWidth=557&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title="
                     
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://img-blog.csdnimg.cn/6c67dfb6b5c24939ac8f38aa58956153.png#id=fXIRK&originHeight=456&originWidth=904&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title="
                     
                ></p>
<h5 id="3-3-2-POJO参数-1"><a href="#3-3-2-POJO参数-1" class="headerlink" title="3.3.2  POJO参数"></a><strong>3.3.2  POJO参数</strong></h5><p>请求参数名与形参对象属性名相同，定义POJO类型参数即可接受参数!</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://img-blog.csdnimg.cn/6d60df1dac3e4926921bb7ed11a42eef.png#id=wDm9u&originHeight=359&originWidth=619&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title="
                     
                ></p>
<h5 id="3-3-3-嵌套POJO类型参数-1"><a href="#3-3-3-嵌套POJO类型参数-1" class="headerlink" title="3.3.3 嵌套POJO类型参数"></a><strong>3.3.3 嵌套POJO类型参数</strong></h5><p>嵌套POJO参数：POJO对象中包含POJO对象<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://img-blog.csdnimg.cn/95476e0488a64a9d8afc17e023a7c245.png#id=icTdQ&originHeight=116&originWidth=640&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title="
                     
                ></p>
<p><em>请求参数名与形参对象属性名相同，按照对象层次结构关系即可接受嵌套POJO属性参数</em></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://img-blog.csdnimg.cn/81e48df61ce045279aa6eb8f274b4e24.png#id=POdeM&originHeight=295&originWidth=639&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title="
                     
                ></p>
<h5 id="3-3-4-数组类型参数-1"><a href="#3-3-4-数组类型参数-1" class="headerlink" title="3.3.4 数组类型参数"></a>3.3.4 数组类型参数</h5><p><em>请求参数名与形参对象属性名相同且请求参数为多个，定义数组类型参数即可接收参数</em></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://img-blog.csdnimg.cn/1bf08c621f8b413093807cda91cabbde.png#id=VhN5D&originHeight=285&originWidth=585&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title="
                     
                ></p>
<h5 id="3-3-5-集合类型参数-1"><a href="#3-3-5-集合类型参数-1" class="headerlink" title="3.3.5  集合类型参数"></a><strong><em>3.3.5  集合类型参数</em></strong></h5><p>集合保存普通参数：请求参数名与形参集合对象名相同且请求参数为多个，@RequestParm绑定参数关系<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://img-blog.csdnimg.cn/e4354ac81e0e48238b5dcd9f9ad91c87.png#id=KuJqk&originHeight=285&originWidth=641&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title="
                     
                ></p>
<h4 id="3-4-传递json数据-1"><a href="#3-4-传递json数据-1" class="headerlink" title="3.4 传递json数据"></a>3.4 传递json数据</h4><h5 id="3-4-1-json数组-1"><a href="#3-4-1-json数组-1" class="headerlink" title="3.4.1 json数组"></a>3.4.1 json数组</h5><div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/listParamForJson&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> string <span class="title function_">listParamForJson</span><span class="params">(List&lt;String&gt; likes)</span>&#123;</span><br><span class="line">	system.out.println(<span class="string">&quot;list common(json)参数传递 list ==&gt; &quot;</span>+likes);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;list common for json param&#x27;&#125;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h5 id="3-4-2-json对象-PoJo-1"><a href="#3-4-2-json对象-PoJo-1" class="headerlink" title="3.4.2 json对象(PoJo)"></a>3.4.2 json对象(PoJo)</h5><div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/pojoParamForson&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> string <span class="title function_">pojoParamForJson</span><span class="params">(User user)</span>i</span><br><span class="line">	system.out.println( <span class="string">&quot;pojo(json)参数传递user ==&gt; &quot;</span>+user);</span><br><span class="line">	<span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;pojo for json param&#x27;&#125;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h5 id="3-4-3-json数组-集合参数-1"><a href="#3-4-3-json数组-集合参数-1" class="headerlink" title="3.4.3 json数组(集合参数)"></a>3.4.3 json数组(集合参数)</h5><div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/listPojoParamForson&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> string <span class="title function_">listPojoParamForJson</span><span class="params">( List&lt;User&gt; list)</span>&#123;</span><br><span class="line">	system.out.println(<span class="string">&quot;list pojo(json)参数传递list ==&gt; &quot;</span>+list);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;list pojo for json param&#x27;&#125;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h4 id="3-5-RequestBody与-RequestParam区别-1"><a href="#3-5-RequestBody与-RequestParam区别-1" class="headerlink" title="3.5 @RequestBody与@RequestParam区别"></a>3.5 @RequestBody与@RequestParam区别</h4><ul>
<li>区别 <ul>
<li>@RequestParam用于接收url地址传参，表单传参【application&#x2F;x-www-form-urlencoded】</li>
<li>@RequestBody用于接收json数据【application&#x2F;json】</li>
</ul>
</li>
<li>应用 <ul>
<li>后期开发中，发送json格式数据为主，@RequestBody应用较广</li>
<li>如果发送非json格式数据，选用@RequestParam接收请求参数</li>
</ul>
</li>
</ul>
<h4 id="3-6-日期类型参数传递-1"><a href="#3-6-日期类型参数传递-1" class="headerlink" title="3.6 日期类型参数传递"></a>3.6 日期类型参数传递</h4><ul>
<li>日期类型数据基于系统不同格式也不尽相同 <ul>
<li>2088-08-18</li>
<li>2088&#x2F;08&#x2F;18</li>
<li>08&#x2F;18&#x2F;2088</li>
</ul>
</li>
<li>接收形参时，根据不同的日期格式设置不同的接收方式</li>
</ul>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/dataParam&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> string <span class="title function_">dataParam</span><span class="params">(Date date , </span></span><br><span class="line"><span class="params"><span class="meta">@DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)</span> Date date1, <span class="meta">@DateTimeFormat(pattern = &quot;yyyy/MM/dd HH : mm: ss&quot;)</span>Date date2)</span></span><br><span class="line">&#123;</span><br><span class="line">	system.out.println(<span class="string">&quot;参数传递date ==&gt; &quot;</span>+date);</span><br><span class="line">	System.out.println(<span class="string">&quot;参数传递date(yyyy-MM-dd) ==&gt; &quot;</span>+date1);</span><br><span class="line">	system.out.println(<span class="string">&quot;参数传递date(yyyy/MM/dd HH:mm:ss) ==&gt; &quot;</span>+date2);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27; module&#x27; : &#x27;data param&#x27; &#125;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>名称: <a href="/DateTimeFormat">@DateTimeFormat </a> </li>
<li>类型:<strong>形参注解</strong></li>
<li>位置: SpringMVC控制器方法形参前面</li>
<li>作用:设定日期时间型数据格式</li>
<li>范例:</li>
</ul>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping( &quot;/dataParam&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> string <span class="title function_">dataParam</span><span class="params">( Date date)</span>&#123;</span><br><span class="line">	system.out.println(<span class="string">&quot;参数传递date ==&gt; &quot;</span>+date);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27; :&#x27;data param&#x27;&#125;&quot;</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>属性:   pattern : 日期时间格式字符串</li>
</ul>
<h4 id="3-6-类型转换器-1"><a href="#3-6-类型转换器-1" class="headerlink" title="3.6 类型转换器"></a>3.6 类型转换器</h4><ul>
<li>Converter接口</li>
</ul>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Converter</span>&lt;S，T&gt; &#123;</span><br><span class="line">	<span class="meta">@Nullable</span></span><br><span class="line">	T <span class="title function_">convert</span><span class="params">(s var1)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>请求参数年龄数据(String-Integer)</li>
<li>日期格式转换(String → Date)</li>
</ul>
<h3 id="4-响应-1"><a href="#4-响应-1" class="headerlink" title="4 响应"></a>4 响应</h3><p>&#x2F;&#x2F;响应页面&#x2F; 跳转页面</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/toJumpPage&quot;)</span></span><br><span class="line"><span class="keyword">public</span> string <span class="title function_">toJumpPage</span><span class="params">()</span>&#123;</span><br><span class="line">	System.out.println(<span class="string">&quot;跳转页面&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;page.jsp&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>&#x2F;&#x2F;响应文本数据</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/toText&quot;)</span></span><br><span class="line"><span class="keyword">public</span> string <span class="title function_">toText</span><span class="params">( )</span>&#123;</span><br><span class="line">	System.out.println(<span class="string">&quot;返回纯文本数据&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;response text&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>&#x2F;&#x2F;响应Pojo对象</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/toJsonPOJO&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> User <span class="title function_">tojsonPojo</span><span class="params">()</span>&#123;</span><br><span class="line">	System.out.print1n(<span class="string">&quot;返回json对象数据&quot;</span>);</span><br><span class="line">  <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>( );</span><br><span class="line">	user.setName( <span class="string">&quot;itcast&quot;</span>);</span><br><span class="line">  user.setAge( <span class="number">15</span>);</span><br><span class="line">	<span class="keyword">return</span> user;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>&#x2F;&#x2F;响应POJO集合对象</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/tosonList&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> List&lt;User&gt; <span class="title function_">toJsonList</span><span class="params">()</span>i</span><br><span class="line">	System.out.print1n(<span class="string">&quot;返回json集合数据&quot;</span>);</span><br><span class="line">	<span class="type">User</span> <span class="variable">user1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">	user1.setName(<span class="string">&quot;传智播客&quot;</span>);</span><br><span class="line">	user1.setAge(<span class="number">15</span>);</span><br><span class="line">	<span class="type">User</span> <span class="variable">user2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">	user2.setName(<span class="string">&quot;黑马程序员&quot;</span>);</span><br><span class="line">	user2.setAge(<span class="number">12</span>);</span><br><span class="line">	List&lt;User&gt; userList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;~&gt;();</span><br><span class="line">	userList.add(user1);</span><br><span class="line">	userList.add(user2);</span><br><span class="line">	<span class="keyword">return</span> userList;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>名称: <a href="/ResponseBody">@ResponseBody </a> </li>
<li>类型:<strong>方法注解</strong></li>
<li>位置: SpringMVc控制器方法定义上方</li>
<li>作用:设置当前控制器返回值作为响应体</li>
<li>范例</li>
</ul>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/save&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">save</span><span class="params">()</span>&#123;</span><br><span class="line">	System.out.print1n(<span class="string">&quot;save.. .&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;info&#x27;:&#x27;springmvc&#x27;&#125;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><strong>HttpMessageConverter</strong> 接口</p>
<h3 id="5-REST风格-1"><a href="#5-REST风格-1" class="headerlink" title="5 REST风格"></a>5 REST风格</h3><p>按照REST风格访问资源时使用行为动作区分对资源进行了何种操作</p>
<p>http: <a target="_blank" rel="noopener" href="//localhost/users">&#x2F;&#x2F;localhost&#x2F;users</a>  					   查询全部用户信息GET(查询)<br>http: <a target="_blank" rel="noopener" href="//localhost/users/1">&#x2F;&#x2F;localhost&#x2F;users&#x2F;1</a>				  	查询指定用户信息GET(查询)<br>http: <a target="_blank" rel="noopener" href="//localhost/users">&#x2F;&#x2F;localhost&#x2F;users</a>  						添加用户信息 POST(新增&#x2F;保存)<br>http: <a target="_blank" rel="noopener" href="//localhost/users">&#x2F;&#x2F;localhost&#x2F;users</a>					   	修改用户信息PUT(修改&#x2F;更新)<br><a class="link"   target="_blank" rel="noopener" href="http://localhost/users/1" >http://localhost/users/1 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>						 删除用户信息DELETE (删除)</p>
<h4 id="5-1-RESTful入门案列-1"><a href="#5-1-RESTful入门案列-1" class="headerlink" title="5.1 RESTful入门案列"></a>5.1 RESTful入门案列</h4><p>1.设定http请求动作（动词）</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/users&quot;,method = RequestMethod.POST)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> string <span class="title function_">save</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span>&#123;</span><br><span class="line">	System.out.println(<span class="string">&quot;user save. . .&quot;</span> + user) ;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;user save&#x27;&#125;&quot;</span>;</span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/users&quot; ,method = RequestMethod.PUT)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> string <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span>&#123;</span><br><span class="line">	System.out.print1n(<span class="string">&quot;user update. . . &quot;</span>+user);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;user update&#x27;&#125;&quot;</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>2.设定请求参数（路径变量）</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/users/&#123;id&#125;&quot;,method = RequestMethod.DELETE)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> string <span class="title function_">delete</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">	System.out.println(<span class="string">&quot;user delete. . .&quot;</span> + id);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;user delete&#x27;&#125;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><a href="/RequestBody">@RequestBody	</a> 			  <a href="/RequestParam">@RequestParam </a>                                 <a href="/PathVariable">@PathVariable </a> </p>
<ul>
<li>区别 <ul>
<li><a href="/RequestParam">@RequestParam </a> <strong>用于接收url地址传参或表单传参</strong></li>
<li><a href="/RequestBody">@RequestBody </a> <strong>用于接收json数据</strong></li>
<li><a href="/PathVariable">@PathVariable </a> <strong>用于接收路径参数</strong>，使用{参数名称}描述路径参数0</li>
</ul>
</li>
<li>应用 <ul>
<li>后期开发中，发送请求参数超过1个时，<strong>以json格式为主</strong>，@RequestBody应用较广</li>
<li>如果发送非json格式数据，选用@RequestParam接收请求参数</li>
<li>采用RESTful进行开发，当参数数量较少时，例如1个，可以采用@PathVariable接收请求路径变量，通常用于传递id值</li>
</ul>
</li>
</ul>
<h3 id="6-基本注解-1"><a href="#6-基本注解-1" class="headerlink" title="6 基本注解"></a>6 基本注解</h3><p><a href="/Controller">@Controller </a>  声明Controller组件，通常作用在控制层（如 Spring MVC 的 Controller），用于将控制层的类标识为 Spring 中的 Bean，其功能与 <a href="/Component">@Component </a> 相同。 </p>
<p><a href="/Service">@Service </a>   声明Service组件 @Service(“myMovieLister”) ，通常作用在业务层（Service 层），用于将业务层的类标识为 Spring 中的 Bean，其功能与 <a href="/Component">@Component </a> 相同。 </p>
<p><a href="/Repository">@Repository </a>  声明Dao组件，将数据访问层（DAO 层）的类标识为 Spring 中的 Bean，其功能与 <a href="/Component">@Component </a> 相同。 </p>
<p><a href="/Component">@Component </a> 泛指组件, 可以使用此注解描述 Spring 中的 Bean，但它是一个泛化的概念，仅仅表示一个组件（Bean），并且可以作用在任何层次。使用时只需将该注解标注在相应类上即可。</p>
<p>&#x3D;&#x3D;@RequestMapping(“&#x2F;menu”)&#x3D;&#x3D;请求映射，用于映射url到控制器类或一个特定的处理程序方法。可用于类或方法上。用于类上，表示类中的所有响应请求的方法都是以该地址作为父路径。</p>
<p><a href="/GetMapping">@GetMapping </a> ：它是 <a href="/RequestMapping(method">@RequestMapping(method </a> &#x3D;RequestMethod.GET) 的一个快捷方式，只能处理 Get 类型请求。 </p>
<p><a href="/PostMapping">@PostMapping </a> :它是 <a href="/RequestMapping(method">@RequestMapping(method </a> &#x3D;RequestMethod.POST) 的一个快捷方式，只能处理 Post类型请求。 </p>
<p><a href="/Resource">@Resource </a> 用于注入，( j2ee提供的 ) 默认按名称装配@Resource(name&#x3D;“beanName”)</p>
<p><a href="/Autowired">@Autowired </a>  用于注入，(spring提供的) 默认按类型装配</p>
<p>@Transactional( rollbackFor&#x3D;{Exception.class}) 事务管理</p>
<p><a href="/RequestBody">@RequestBody </a> ：注解实现接收http请求的json数据，将json转换为java对象。</p>
<p><a href="/ResponseBody">@ResponseBody </a> ：注解实现将controller方法返回对象转化为json对象响应给客户。</p>
<p>@Scope(“prototype”) 设定bean的作用域</p>
<p><a href="/RequestParam">@RequestParam </a>  ：将请求参数绑定到控制器的方法参数上</p>
<p><a href="/Configuration">@Configuration </a> ：声明当前类为配置类，相当于 xml 形式的 Spring 配置中的，该注解需要添加到类上。</p>
<h3 id="7-SpringMVC处理ajax请求-1"><a href="#7-SpringMVC处理ajax请求-1" class="headerlink" title="7.SpringMVC处理ajax请求"></a>7.SpringMVC处理ajax请求</h3><h4 id="7-1-RequestBody-1"><a href="#7-1-RequestBody-1" class="headerlink" title="7.1 @RequestBody "></a>7.1 <a href="/RequestBody">@RequestBody </a></h4><p>@RequestBody可以获取请求体信息，使用@RequestBody注解标识控制器方法的形参，当前请求的请求体就会为当前注解所标识的形参赋值</p>
<div class="highlight-container" data-rel="Html"><figure class="iseeu highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--此时必须使用post请求方式，因为get请求没有请求体--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:</span> <span class="attr">action</span>=<span class="string">&quot;a&#123;/test/RequestBody&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">	用户名:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  密码:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/test/RequestBody&quot;)</span></span><br><span class="line"><span class="keyword">public</span> string <span class="title function_">testRequestBody</span><span class="params">(<span class="meta">@RequestBody</span> string requestBody)</span>&#123;</span><br><span class="line">  System.out.print1n(<span class="string">&quot;requestBody : &quot;</span>+requestBody) ;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>1.<a href="/RequestBody">@RequestBody </a> :将请求体中的内容和控制器方法的形参进行绑定 </p>
<p>2.使用@RequestBody注解将json格式的请求参数转换为java对象</p>
<p>a&gt;导入jackson的依赖<br>b&gt;在springMVC的配置文件中设置&lt;mvc:annotation-driven&#x2F; &gt;<br>c&gt;在处理请求的控制器方法的形参位置，直接设置json格式的请求参数要转换的java类型的形参，使用@RequestBody注解标识。</p>
<p>3.@ResponseBody:将所标识的控制器方法的返回值作为响应报文的响应体响应到浏览器</p>
<p>4.使用@ResponseBody注解响应浏览器json格式的数据</p>
<p>a&gt;导入jackson的依赖<br>b&gt;在springMVC的配置文件中设置&lt;mvc:annotation-driven&#x2F; &gt;</p>
<p>c&gt;将需要转换为json字符串的java对象直接作为控制器方法的返回值，使用@ResponseBody注解标识控制器方法就可以将java对象直接转换为json字符串，并响应到浏览器</p>
<p>常用的7ava对象转换为json的结集:</p>
<p>实体类–&gt;json对象<br>map–&gt;json对象</p>
<p>list–&gt;json数组</p>
<h4 id="7-2、RestController注解-1"><a href="#7-2、RestController注解-1" class="headerlink" title="7.2、RestController注解"></a>7.2、RestController注解</h4><p>@RestController注解是springMVC提供的一个复合注解，标识在控制器的类上，就相当于为类添加了@Controller注解，并且为其中的每个方法添加了@ResponseBody注解</p>
<h3 id="8-域对象共享数据-1"><a href="#8-域对象共享数据-1" class="headerlink" title="8.域对象共享数据."></a>8.域对象共享数据.</h3><h4 id="8-1-使用ServletAPI向request域对象共享数据-1"><a href="#8-1-使用ServletAPI向request域对象共享数据-1" class="headerlink" title="8.1 使用ServletAPI向request域对象共享数据"></a>8.1 使用ServletAPI向request域对象共享数据</h4><div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testservletAPI&quot;)</span></span><br><span class="line"><span class="keyword">public</span> string <span class="title function_">testServletAPI</span><span class="params">(HttpServletRequest request)</span>&#123;</span><br><span class="line">request.setAttribute(<span class="string">&quot;testscope&quot;</span>，<span class="string">&quot;he1lo,servletAPI&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h4 id="8-2-使用ModelAndView向request域对象共享数据-1"><a href="#8-2-使用ModelAndView向request域对象共享数据-1" class="headerlink" title="8.2 使用ModelAndView向request域对象共享数据"></a>8.2 使用ModelAndView向request域对象共享数据</h4><div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testMode1Andview&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Mode1AndView <span class="title function_">testMode1Andview</span><span class="params">(&#123;</span></span><br><span class="line"><span class="params"><span class="comment">/**</span></span></span><br><span class="line"><span class="comment"><span class="params">*Mode1Andview有Mode1和view的功能Mode1主要用于向请求域共享数据</span></span></span><br><span class="line"><span class="comment"><span class="params">*view主要用于设置视图，实现页面跳转*/</span></span></span><br><span class="line"><span class="params">	ModelAndView mav = new Mode1Andview()</span>;</span><br><span class="line">  <span class="comment">//向请求域共享数据</span></span><br><span class="line">	mav.addObject(<span class="string">&quot;testscope&quot;</span>,<span class="string">&quot;he11o,ModelAndView&quot;</span>);</span><br><span class="line">  <span class="comment">//设置视图，实现页面跳转</span></span><br><span class="line">	mav.setViewName( <span class="string">&quot;success &quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> mav;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="9-文件上传和下载-1"><a href="#9-文件上传和下载-1" class="headerlink" title="9.文件上传和下载"></a>9.文件上传和下载</h3><h4 id="9-1-文件下载-1"><a href="#9-1-文件下载-1" class="headerlink" title="9.1 文件下载"></a>9.1 文件下载</h4><p>ResponseEntity用于控制器方法的返回值类型，该控制器方法的返回值就是响应到浏览器的响应报文</p>
<p>使用ResponseEntity实现下载文件的功能</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testDown&quot;)</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/test/down&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;<span class="type">byte</span>[]&gt; testResponseEntity(HttpSession session) <span class="keyword">throws</span> IOException</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//获取servletcontext对象</span></span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> session.getServletContext();</span><br><span class="line">        <span class="comment">//获取服务器中文件的真实路径</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">realPath</span> <span class="operator">=</span> servletContext.getRealPath(<span class="string">&quot;/static/img/1.jpg&quot;</span>);</span><br><span class="line">        <span class="comment">//创建输入流</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(realPath) ;</span><br><span class="line">        <span class="comment">//创建字节数组</span></span><br><span class="line">        <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[is.available()];</span><br><span class="line">        <span class="comment">//将流读到字节数组中</span></span><br><span class="line">        is.read(bytes) ;</span><br><span class="line">        <span class="comment">//创建HttpHeaders对象设置响应头信息</span></span><br><span class="line">        MultiValueMap&lt;String,String&gt; headers = <span class="keyword">new</span> <span class="title class_">HttpHeaders</span>();</span><br><span class="line">        <span class="comment">//设置要下载方式以及下载文件的名字</span></span><br><span class="line">        headers.add(<span class="string">&quot;content-Disposition&quot;</span>,<span class="string">&quot;attachment;filename=1.jpg&quot;</span>);</span><br><span class="line">        <span class="comment">//设置响应状态码</span></span><br><span class="line">        <span class="type">HttpStatus</span> <span class="variable">statusCode</span> <span class="operator">=</span> HttpStatus.OK;</span><br><span class="line">        <span class="comment">//创建ResponseEntity对象</span></span><br><span class="line">        ResponseEntity&lt;<span class="type">byte</span>[]&gt; responseEntity = <span class="keyword">new</span> <span class="title class_">ResponseEntity</span>&lt;&gt;(bytes,headers,statusCode) ;</span><br><span class="line">        <span class="comment">//关闭输入流</span></span><br><span class="line">        is.close();</span><br><span class="line">        <span class="keyword">return</span> responseEntity;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div>

<h4 id="9-2-文件上传-1"><a href="#9-2-文件上传-1" class="headerlink" title="9.2 文件上传"></a>9.2 文件上传</h4><p>文件上传要求form表单的请求方式必须为post，并且添加属性enctype&#x3D;”multipart&#x2F;form-data”SpringMVC中将上传的文件封装到MultipartFile对象中，通过此对象可以获取文件相关信息</p>
<p>上传步骤：</p>
<p>①添加依赖：</p>
<div class="highlight-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<p>②在springmvc.xml中配置文件上传解析器</p>
<div class="highlight-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">&lt;!--配置文件上传解析器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;multipartResolver&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<p>③文件上传</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取上传的文件的文件名</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">filename</span> <span class="operator">=</span> photo.getOriginalFilename();</span><br><span class="line">       <span class="comment">//获取上传的文件的后缀名</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">hzname</span> <span class="operator">=</span> filename.substring(filename.lastIndexOf(<span class="string">&quot;.&quot;</span>));</span><br><span class="line">        <span class="comment">//获取uuid</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">uuid</span> <span class="operator">=</span> UUID.randomUUID().toString();</span><br><span class="line">        <span class="comment">//拼接一个新的文件名</span></span><br><span class="line">        filename = uuid + hzname;</span><br><span class="line">        System.out.println(filename);</span><br><span class="line">        <span class="comment">//获取ServletContext对象</span></span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> session.getServletContext();</span><br><span class="line">        <span class="comment">//获取当前工程下photo目录的真实路径</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">photoPath</span> <span class="operator">=</span> servletContext.getRealPath(<span class="string">&quot;photo&quot;</span>);</span><br><span class="line">        <span class="comment">//传教photoPath所对应的File对象</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(photoPath);</span><br><span class="line">        <span class="comment">//判断file所对应的目录是否存在</span></span><br><span class="line">        <span class="keyword">if</span> (!file.exists())&#123;</span><br><span class="line">            file.mkdir();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">String</span> <span class="variable">finalPath</span> <span class="operator">=</span> photoPath + File.separator + filename;</span><br><span class="line">        <span class="comment">//上传文件</span></span><br><span class="line">        photo.transferTo(<span class="keyword">new</span> <span class="title class_">File</span>(finalPath));</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="10-拦截器-1"><a href="#10-拦截器-1" class="headerlink" title="10 拦截器"></a>10 拦截器</h3><h4 id="10-1、拦截器的配置-1"><a href="#10-1、拦截器的配置-1" class="headerlink" title="10.1、拦截器的配置"></a>10.1、拦截器的配置</h4><p>SpringMVC中的拦截器用于拦截控制器方法的执行</p>
<p>springMVC中的拦截器需要实现Handlerlnterceptor</p>
<p>SpringMVC的拦截器必须在SpringMVC的配置文件中进行配置:</p>
<p>过滤器：在浏览器和目标资源进行过滤</p>
<div class="highlight-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--bean和ref标签所配置的拦截器默认对DispatcherservLet处理的所有的请求进行拦截--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;bean class=&quot;com.atguigu.interceptor.FirstInterceptor&quot; /&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;ref bean=&quot;firstInterceptor”/E-&gt;</span></span><br><span class="line"><span class="comment">&lt;mvc:interceptor&gt;</span></span><br><span class="line"><span class="comment">    &lt;! -配置需要拦截的请求的请求路径，/**表示所有请求--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">&quot;/**&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置需要排除拦截的请求的请求路径--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:exclude-mapping</span> <span class="attr">path</span>=<span class="string">&quot;/abc&quot;</span>/&gt;</span><span class="comment">&lt;!--配置拦截器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;firstInterceptor&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<h4 id="10-2、拦截器的三个抽象方法-1"><a href="#10-2、拦截器的三个抽象方法-1" class="headerlink" title="10.2、拦截器的三个抽象方法"></a>10.2、拦截器的三个抽象方法</h4><p>preHandle():在控制器方法执行之前执行，其返回值表示对控制器方法的拦截(False)或放行(true)</p>
<p>postHandle( ):在控制器方法执行之后执行</p>
<p>aftercompletion():在控制器方法执行之后，且渲染视图完毕之后执行</p>
<h3 id="11-使用类替代web-xml-1"><a href="#11-使用类替代web-xml-1" class="headerlink" title="11.使用类替代web.xml"></a>11.使用类替代web.xml</h3><p>WebConfig类</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> Wang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2023 01 05 18 49</span></span><br><span class="line"><span class="comment"> * Description:代替springmvc的配置文件</span></span><br><span class="line"><span class="comment"> * 扫描组件、视图解析器、默认的servlet、mvc的注解驱动</span></span><br><span class="line"><span class="comment"> * 视图控制器、文件上传解析器、拦截器、异常解析器</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//将类标识为配置类</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">//扫描组件</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.wjp.controller&quot;)</span></span><br><span class="line"><span class="comment">//开启mvc的注解驱动</span></span><br><span class="line"><span class="meta">@EnableWebMvc</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="comment">//默认的servlet处理静态资源</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">configureDefaultServletHandling</span><span class="params">(DefaultServletHandlerConfigurer configurer)</span> &#123;</span><br><span class="line">            configurer.enable();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="comment">//配置视图解析器</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addViewControllers</span><span class="params">(ViewControllerRegistry registry)</span> &#123;</span><br><span class="line">        registry.addViewController(<span class="string">&quot;/&quot;</span>).setViewName(<span class="string">&quot;index&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="comment">//@Bean注解可以将标识的方法的返回值作为bean进行管理</span></span><br><span class="line">    <span class="keyword">public</span> CommonsMultipartResolver <span class="title function_">multipartResolver</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">CommonsMultipartResolver</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="comment">//拦截器</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> &#123;</span><br><span class="line">        <span class="type">FirstInterceptor</span> <span class="variable">firstInterceptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FirstInterceptor</span>();</span><br><span class="line">        registry.addInterceptor(firstInterceptor).addPathPatterns(<span class="string">&quot;/**&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="comment">//配置异常解析器</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">configureHandlerExceptionResolvers</span><span class="params">(List&lt;HandlerExceptionResolver&gt; resolvers)</span> &#123;</span><br><span class="line">        <span class="type">SimpleMappingExceptionResolver</span> <span class="variable">exceptionResolver</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleMappingExceptionResolver</span>();</span><br><span class="line">        <span class="type">Properties</span> <span class="variable">prop</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">        prop.setProperty(<span class="string">&quot;java.lang.ArithmeticException&quot;</span>,<span class="string">&quot;error&quot;</span>);</span><br><span class="line">        exceptionResolver.setExceptionMappings(prop);</span><br><span class="line">        exceptionResolver.setExceptionAttribute(<span class="string">&quot;ex&quot;</span>);</span><br><span class="line">        resolvers.add(exceptionResolver);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//配置生成模板解析器</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ITemplateResolver <span class="title function_">templateResolver</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">WebApplicationContext</span> <span class="variable">webApplicationContext</span> <span class="operator">=</span> ContextLoader.getCurrentWebApplicationContext();</span><br><span class="line">        <span class="comment">//serv1etcontextTemplateResolver需要一个servletContext作为构造参数，可通过webApplicationcontext的方法获得</span></span><br><span class="line">        <span class="type">ServletContextTemplateResolver</span> <span class="variable">templateResolver</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServletContextTemplateResolver</span>(webApplicationContext.getServletContext());</span><br><span class="line">        templateResolver.setPrefix(<span class="string">&quot;/WEB-INF/template/&quot;</span>);</span><br><span class="line">        templateResolver.setSuffix(<span class="string">&quot;.html&quot;</span>);</span><br><span class="line">        templateResolver.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        templateResolver.setTemplateMode(TemplateMode.HTML);</span><br><span class="line">        <span class="keyword">return</span> templateResolver;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//生成模板引擎并为模板引擎注入模板解析器Bean</span></span><br><span class="line">    <span class="keyword">public</span> SpringTemplateEngine <span class="title function_">templateEngine</span><span class="params">(ITemplateResolver templateResolver)</span>&#123;</span><br><span class="line">        <span class="type">SpringTemplateEngine</span> <span class="variable">templateEngine</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SpringTemplateEngine</span>() ;</span><br><span class="line">        templateEngine.setTemplateResolver (templateResolver);</span><br><span class="line">        <span class="keyword">return</span> templateEngine;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//生成视图解析器并未解析器注入模板引擎Bean</span></span><br><span class="line">    <span class="keyword">public</span> ViewResolver <span class="title function_">viewResolver</span><span class="params">(SpringTemplateEngine templateEngine)</span> &#123;</span><br><span class="line">        <span class="type">ThymeleafViewResolver</span> <span class="variable">viewResolver</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThymeleafViewResolver</span> ();</span><br><span class="line">        viewResolver.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        viewResolver .setTemplateEngine(templateEngine);</span><br><span class="line">        <span class="keyword">return</span> viewResolver;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>WebInit类</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> Wang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2023 01 05 18 46</span></span><br><span class="line"><span class="comment"> * Description: 代替web.xml</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebInit</span> <span class="keyword">extends</span> <span class="title class_">AbstractAnnotationConfigDispatcherServletInitializer</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="comment">/*设置一个配置类，来代替spring的配置文件*/</span></span><br><span class="line">    <span class="keyword">protected</span> Class&lt;?&gt;[] getRootConfigClasses() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;SpringConfig.class&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="comment">//设置一个配置类代替springmvc的配置文件</span></span><br><span class="line">    <span class="keyword">protected</span> Class&lt;?&gt;[] getServletConfigClasses() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;WebConfig.class&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="comment">//设置springmvc的前端控制器DispatcherServlet的url-pattern</span></span><br><span class="line">    <span class="keyword">protected</span> String[] getServletMappings() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;/&quot;</span>&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="comment">//设置当前的过滤器</span></span><br><span class="line">    <span class="keyword">protected</span> Filter[] getServletFilters() &#123;</span><br><span class="line">        <span class="comment">//创建编码过滤器</span></span><br><span class="line">        <span class="type">CharacterEncodingFilter</span> <span class="variable">characterEncodingFilter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CharacterEncodingFilter</span>();</span><br><span class="line">        characterEncodingFilter.setEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        characterEncodingFilter.setForceEncoding(<span class="literal">true</span>);</span><br><span class="line">        <span class="comment">//处理请求方式的过滤器</span></span><br><span class="line">        <span class="type">HiddenHttpMethodFilter</span> <span class="variable">hiddenHttpMethodFilter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HiddenHttpMethodFilter</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Filter</span>[]&#123;characterEncodingFilter,hiddenHttpMethodFilter&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>TestController类</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestController</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        HandlerInterceptor.<span class="built_in">super</span>.postHandle(request, response, handler, modelAndView);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        HandlerInterceptor.<span class="built_in">super</span>.afterCompletion(request, response, handler, ex);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="12-SpringMVC执行流程-1"><a href="#12-SpringMVC执行流程-1" class="headerlink" title="12 SpringMVC执行流程"></a>12 SpringMVC执行流程</h3><h4 id="12-1-SpringMVC常用组件SpringMVC常用组件-1"><a href="#12-1-SpringMVC常用组件SpringMVC常用组件-1" class="headerlink" title="12.1 SpringMVC常用组件SpringMVC常用组件"></a>12.1 SpringMVC常用组件SpringMVC常用组件</h4><ul>
<li>DispatcherServlet:前端控制器，不需要工程师开发，由框架提供<br>作用:统一处理请求和响应，整个流程控制的中心，由它调用其它组件处理用户的请求。 </li>
<li>HandlerMapping:处理器映射器，不需要工程师开发，由框架提供<br>作用:根据请求的url、method等信息查找Handler，即控制器方法。 </li>
<li>Handler:处理器，需要工程师开发<br>作用:在DispatcherServlet的控制下Handler对具体的用户请求进行处理. </li>
<li>HandlerAdapter:处理器适配器，不需要工程师开发，由框架提供。<br>作用:通过HandlerAdapter对处理器(控制器方法）进行执行 </li>
<li>ViewResolver:视图解析器，不需要工程师开发，由框架提供<br>作用:进行视图解析，得到相应的视图，例如:ThymeleafView、InternalResourceView、RedirectView。 </li>
<li>View:视图<br>作用:将模型数据通过页面展示给用户。</li>
</ul>
<h4 id="12-2-执行流程-1"><a href="#12-2-执行流程-1" class="headerlink" title="12.2 执行流程"></a>12.2 执行流程</h4><p>1)用户向服务器发送请求，请求被SpringMVC前端控制器DispatcherServlet捕获。</p>
<p>2)DispatcherServlet对请求URL进行解析，得到请求资源标识符(URI)，判断请求URI对应的映射:</p>
<p>a)不存在<br>i.再判断是否配置了mvc:default-servlet-handler<br>ii.如果没配置，则控制台报映射查找不到，客户端展示404错误</p>
<p>ili.如果有配置，则访问目标资源（一般为静态资源，如:JS.CSS,HTML)，找不到客户端也会展示404错误</p>
<p>b)存在则执行下面的流程<br>3)根据该URI，调用HandlerMapping获得该Handler配置的所有相关的对象（包括Handler对象以及Handler对$对应的拦截器)，最后以HandlerExecutionChain执行链对象的形式返回。</p>
<p>4)DispatcherServlet根据获得的Handler，选择一个合适的HandlerAdapter。<br>5)如果成功获得HandlerAdapter，此时将开始执行拦截器的preHandler(…)方法【正向】<br>6)提取Request中的模型数据，填充Handler入参，开始执行Handler (Controller)方法，处理请求。在填充Handler的入参过程中，根据你的配置，Spring将帮你做一些额外的工作;<br>a) HttpMessageConveter:将请求消息(如son、xml等数据）转换成一个对象，将对象转换为指定的响应信息</p>
<p>b)数据转换:对请求消息进行数据转换。如String转换成Integer、Double等</p>
<p>c)数据格式化:对请求消息进行数据格式化。如将字符串转换成格式化数字或格式化日期等</p>
<p>d)数据验证:验证数据的有效性（长度、格式等)，验证结果存储到BindingResult或Error中</p>
<p>7)Handler执行完成后，向DispatcherServlet返回一个ModelAndView对象。</p>
<p>8)此时将开始执行拦截器的postHandle(…)方法【逆向】。<br>9)根据返回的ModelAndView (此时会判断是否存在异常:如果存在异常，则执行HandlerExceptionResolver进行异常处理)选择一个适合的ViewResolver进行视图解析，根据Model和View，来渲染视图。<br>10)渲染视图完毕执行拦截器的afterCompletion(…)方法【逆向】。<br>11)将渲染结果返回给客户端。</p>
<h1 id="SSM整合"><a href="#SSM整合" class="headerlink" title="SSM整合"></a>SSM整合</h1><p>1.1、ContextLoaderListener</p>
<p>Spring提供了监听器ContextLoaderListener，实现ServletContextListener接口，可监听ServletContext的状态，在web服务器的启动，读取Spring的配置文件，创建Spring的IOC容器。web应用中必须在web.xml中配置。</p>
<p>分页功能</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/employee/page/&#123;pageNum&#125;&quot;,method = RequestMethod.GET)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getEmployeePage</span><span class="params">(<span class="meta">@PathVariable(&quot;pageNum&quot;)</span> Integer pageNum,Model model)</span>&#123;</span><br><span class="line">        <span class="comment">//获取员工的分页信息</span></span><br><span class="line">        PageInfo&lt;Employee&gt; page = employeeService.getEmployeePage(pageNum);</span><br><span class="line">        <span class="comment">//将分页数据共享到请求域中</span></span><br><span class="line">        model.addAttribute(<span class="string">&quot;page&quot;</span>,page);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;employee_list&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div>

<div class="highlight-container" data-rel="Html"><figure class="iseeu highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span>员工列表<span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>流水号<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>员工姓名<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>年龄<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>性别<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>邮箱<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>操作<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:each</span>=<span class="string">&quot;employee,status:$&#123;page.list&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;status.count&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;employee.empName&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;employee.age&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;employee.gender&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;employee.email&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>修改<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;text-align: center&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">th:if</span>=<span class="string">&quot;$&#123;page.hasPreviousPage&#125;&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/employee/page/1&#125;&quot;</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">th:if</span>=<span class="string">&quot;$&#123;page.hasPreviousPage&#125;&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/employee/page/&#x27;+$&#123;page.prePage&#125;&#125;&quot;</span>&gt;</span>上一页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:each</span>=<span class="string">&quot;num : $&#123;page.navigatepageNums&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">th:if</span>=<span class="string">&quot;$&#123;page.pageNum == num&#125;&quot;</span> <span class="attr">style</span>=<span class="string">&quot;color:red;&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/employee/page/&#x27;+$&#123;num&#125;&#125;&quot;</span> <span class="attr">th:text</span>=<span class="string">&quot;&#x27;[&#x27;+$&#123;num&#125;+&#x27;]&#x27;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">th:if</span>=<span class="string">&quot;$&#123;page.pageNum != num&#125;&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/employee/page/&#x27;+$&#123;num&#125;&#125;&quot;</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;num&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">th:if</span>=<span class="string">&quot;$&#123;page.hasNextPage&#125;&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/employee/page/&#x27;+$&#123;page.nextpage&#125;&#125;&quot;</span>&gt;</span>下一页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">th:if</span>=<span class="string">&quot;$&#123;page.hasNextPage&#125;&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/employee/page/&#x27;+$&#123;page.pages&#125;&#125;&quot;</span>&gt;</span>末页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></div>
<h1 id=""><a href="#" class="headerlink" title=""></a></h1>
            </div>

            
                <div class="post-copyright-info">
                    <div class="article-copyright-info-container">
    <ul>
        <li><strong>Title:</strong> SSM整合</li>
        <li><strong>Author:</strong> 清风煮酒</li>
        <li><strong>Created at:</strong> 2023-08-24 17:14:12</li>
        
            <li>
                <strong>Updated at:</strong> 2023-08-24 17:14:04
            </li>
        
        <li>
            <strong>Link:</strong> https://redefine.ohevan.com/2023/08/24/SSM整合/
        </li>
        <li>
            <strong>License:</strong> This work is licensed under <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">CC BY-NC-SA 4.0</a>.
        </li>
    </ul>
</div>

                </div>
            

            
                <ul class="post-tags-box">
                    
                        <li class="tag-item">
                            <a href="/tags/SSM%E6%95%B4%E5%90%88/">#SSM整合</a>&nbsp;
                        </li>
                    
                </ul>
            

            

            
                <div class="article-nav">
                    
                        <div class="article-prev">
                            <a class="prev"
                            rel="prev"
                            href="/2023/08/24/spring%E6%A1%86%E6%9E%B6%E6%B3%A8%E8%A7%A3/"
                            >
                                <span class="left arrow-icon flex-center">
                                    <i class="fa-solid fa-chevron-left"></i>
                                </span>
                                <span class="title flex-center">
                                    <span class="post-nav-title-item">spring框架注解</span>
                                    <span class="post-nav-item">Prev posts</span>
                                </span>
                            </a>
                        </div>
                    
                    
                        <div class="article-next">
                            <a class="next"
                            rel="next"
                            href="/2023/08/24/%E5%8F%8D%E5%B0%84/"
                            >
                                <span class="title flex-center">
                                    <span class="post-nav-title-item">反射</span>
                                    <span class="post-nav-item">Next posts</span>
                                </span>
                                <span class="right arrow-icon flex-center">
                                    <i class="fa-solid fa-chevron-right"></i>
                                </span>
                            </a>
                        </div>
                    
                </div>
            


            
                <div class="comment-container">
                    <div class="comments-container">
    <div id="comment-anchor"></div>
    <div class="comment-area-title">
        <i class="fa-solid fa-comments"></i>&nbsp;Comments
    </div>
    

        
            
 
    <div id="waline"></div>
    <script type="module"  data-pjax>
        import { init } from 'https://evan.beee.top/js/waline.mjs';

        function loadWaline() {
            init({
                el: '#waline',
                serverURL: 'https://example.example.com',
                lang: 'zh-CN',
                dark: 'body[class~="dark-mode"]',
                requiredMeta: ['nick','mail'], // cannot customize by theme config, change it yourself
            });
        }

        if ('true') {
            const loadWalineTimeout = setTimeout(() => {
                loadWaline();
                clearTimeout(loadWalineTimeout);
            }, 1000);
        } else {
            window.addEventListener('DOMContentLoaded', loadWaline);
        }
        
    </script>



        
    
</div>

                </div>
            
        </div>

        
            <div class="toc-content-container">
                <div class="post-toc-wrap">
    <div class="post-toc">
        <div class="toc-title">On this page</div>
        <div class="page-title">SSM整合</div>
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%80%E3%80%81MyBatis"><span class="nav-text">一、MyBatis</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5%E3%80%81MyBatis%E8%8E%B7%E5%8F%96%E5%8F%82%E6%95%B0%E5%80%BC%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="nav-text">5、MyBatis获取参数值的两种方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6%E7%89%B9%E6%AE%8ASQL%E7%9A%84%E6%89%A7%E8%A1%8C"><span class="nav-text">6特殊SQL的执行</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-%E5%88%A0%E9%99%A4%E6%93%8D%E4%BD%9C"><span class="nav-text">7 删除操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8%E3%80%81%E8%87%AA%E5%AE%9A%E4%B9%89%E6%98%A0%E5%B0%84resultMap"><span class="nav-text">8、自定义映射resultMap</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-SQL%E5%8A%A8%E6%80%81%E6%9F%A5%E8%AF%A2"><span class="nav-text">9 SQL动态查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-MyBatis%E7%9A%84%E7%BC%93%E5%AD%98"><span class="nav-text">10 MyBatis的缓存</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11%E3%80%81MyBatis%E7%9A%84%E9%80%86%E5%90%91%E5%B7%A5%E7%A8%8B"><span class="nav-text">11、MyBatis的逆向工程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#12-%E5%88%86%E9%A1%B5%E6%8F%92%E4%BB%B6"><span class="nav-text">12 分页插件</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BA%8C%E3%80%81Spring"><span class="nav-text">二、Spring</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-spring-Franmework%E4%BA%94%E5%A4%A7%E5%8A%9F%E8%83%BD%E6%A8%A1%E5%9D%97"><span class="nav-text">1.spring Franmework五大功能模块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-IOC%E5%AE%B9%E5%99%A8%E5%9C%A8spring%E4%B8%AD%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="nav-text">2.IOC容器在spring中的实现</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E8%8E%B7%E5%8F%96bean%E7%9A%84%E4%B8%89%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="nav-text">3.获取bean的三种方式:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5"><span class="nav-text">4.依赖注入</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5%E4%B9%8BP%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4"><span class="nav-text">5.依赖注入之P命名空间</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-bean%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="nav-text">6.bean的作用域</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-bean%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-text">7.bean的生命周期</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-FactoryBean"><span class="nav-text">8.FactoryBean</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-AOP%E9%9D%A2%E5%90%91%E5%88%87%E9%9D%A2%E7%BC%96%E7%A8%8B"><span class="nav-text">9.AOP面向切面编程</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#IOC%E5%AE%B9%E5%99%A8%E7%9A%84%E6%A0%B8%E5%BF%83%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%E6%98%AF%E4%BB%80%E4%B9%88"><span class="nav-text">IOC容器的核心实现原理是什么</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Spring%E4%BA%8B%E5%8A%A1"><span class="nav-text">Spring事务</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1"><span class="nav-text">声明式事务</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-JdbcTemplate"><span class="nav-text">1.JdbcTemplate</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E6%B5%8B%E8%AF%95"><span class="nav-text">2.测试</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E4%BB%80%E4%B9%88%E6%98%AF%E4%BA%8B%E7%89%A9"><span class="nav-text">3 .什么是事物</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E4%BA%8B%E7%89%A9%E7%9A%84%E5%9B%9B%E5%A4%A7%E7%89%B9%E6%80%A7"><span class="nav-text">4 .事物的四大特性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-%E4%B8%8D%E8%80%83%E8%99%91%E9%9A%94%E7%A6%BB%E6%80%A7%E4%BC%9A%E5%8F%91%E7%94%9F%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-text">5 .不考虑隔离性会发生的问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-%E5%8C%BA%E5%88%AB"><span class="nav-text">6 .区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-%E4%BA%8B%E5%8A%A1%E7%9A%84%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB"><span class="nav-text">7 .事务的隔离级别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-mysql%E4%B8%8Eoracle%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-text">8 mysql与oracle的区别</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SpringMVC%E6%A6%82%E8%BF%B0"><span class="nav-text">SpringMVC概述</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%88%9D%E5%A7%8B%E5%8C%96%E8%BF%87%E7%A8%8B"><span class="nav-text">2.启动服务器初始化过程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E8%AF%B7%E6%B1%82%E4%B8%8E%E5%93%8D%E5%BA%94"><span class="nav-text">3.请求与响应</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E5%93%8D%E5%BA%94"><span class="nav-text">4 响应</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-REST%E9%A3%8E%E6%A0%BC"><span class="nav-text">5 REST风格</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-%E5%9F%BA%E6%9C%AC%E6%B3%A8%E8%A7%A3"><span class="nav-text">6 基本注解</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-SpringMVC%E5%A4%84%E7%90%86ajax%E8%AF%B7%E6%B1%82"><span class="nav-text">7.SpringMVC处理ajax请求</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-%E5%9F%9F%E5%AF%B9%E8%B1%A1%E5%85%B1%E4%BA%AB%E6%95%B0%E6%8D%AE"><span class="nav-text">8.域对象共享数据.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E5%92%8C%E4%B8%8B%E8%BD%BD"><span class="nav-text">9.文件上传和下载</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="nav-text">10 拦截器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11-%E4%BD%BF%E7%94%A8%E7%B1%BB%E6%9B%BF%E4%BB%A3web-xml"><span class="nav-text">11.使用类替代web.xml</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#12-SpringMVC%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B"><span class="nav-text">12 SpringMVC执行流程</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SSM%E6%95%B4%E5%90%88%E6%B5%81%E7%A8%8B"><span class="nav-text">SSM整合流程</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E5%99%A8"><span class="nav-text">异常处理器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%88%9D%E5%A7%8B%E5%8C%96%E8%BF%87%E7%A8%8B-1"><span class="nav-text">2.启动服务器初始化过程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E8%AF%B7%E6%B1%82%E4%B8%8E%E5%93%8D%E5%BA%94-1"><span class="nav-text">3.请求与响应</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E5%93%8D%E5%BA%94-1"><span class="nav-text">4 响应</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-REST%E9%A3%8E%E6%A0%BC-1"><span class="nav-text">5 REST风格</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-%E5%9F%BA%E6%9C%AC%E6%B3%A8%E8%A7%A3-1"><span class="nav-text">6 基本注解</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-SpringMVC%E5%A4%84%E7%90%86ajax%E8%AF%B7%E6%B1%82-1"><span class="nav-text">7.SpringMVC处理ajax请求</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-%E5%9F%9F%E5%AF%B9%E8%B1%A1%E5%85%B1%E4%BA%AB%E6%95%B0%E6%8D%AE-1"><span class="nav-text">8.域对象共享数据.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E5%92%8C%E4%B8%8B%E8%BD%BD-1"><span class="nav-text">9.文件上传和下载</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-%E6%8B%A6%E6%88%AA%E5%99%A8-1"><span class="nav-text">10 拦截器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11-%E4%BD%BF%E7%94%A8%E7%B1%BB%E6%9B%BF%E4%BB%A3web-xml-1"><span class="nav-text">11.使用类替代web.xml</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#12-SpringMVC%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B-1"><span class="nav-text">12 SpringMVC执行流程</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SSM%E6%95%B4%E5%90%88"><span class="nav-text">SSM整合</span></a></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-text"></span></a></li></ol>

    </div>
</div>
            </div>
        
    </div>
</div>


                

            </div>
            
            

        </div>

        <div class="main-content-footer">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info">
            &copy;
            
              <span>2022</span>
              -
            
            2023&nbsp;&nbsp;<i class="fa-solid fa-heart fa-beat" style="--fa-animation-duration: 0.5s; color: #f54545"></i>&nbsp;&nbsp;<a href="/">清风煮酒</a>
        </div>
        
            <script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="website-count info-item">
                
                    <span id="busuanzi_container_site_uv" class="busuanzi_container_site_uv">
                        VISITOR COUNT&nbsp;<span id="busuanzi_value_site_uv" class="busuanzi_value_site_uv"></span>
                    </span>
                
                
                    <span id="busuanzi_container_site_pv" class="busuanzi_container_site_pv">
                        TOTAL PAGE VIEWS&nbsp;<span id="busuanzi_value_site_pv" class="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="theme-info info-item">
            <span class="powered-by-container">POWERED BY <?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg version="1.1" id="圖層_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1rem" height="1rem" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><path fill="#0E83CD" d="M256.4,25.8l-200,115.5L56,371.5l199.6,114.7l200-115.5l0.4-230.2L256.4,25.8z M349,354.6l-18.4,10.7l-18.6-11V275H200v79.6l-18.4,10.7l-18.6-11v-197l18.5-10.6l18.5,10.8V237h112v-79.6l18.5-10.6l18.5,10.8V354.6z"/></svg><a target="_blank" href="https://hexo.io">Hexo</a></span>
                <br>
            <span class="theme-version-container">THEME&nbsp;<a class="theme-version" target="_blank" href="https://github.com/EvanNotFound/hexo-theme-redefine">Redefine v2.1.2</a>
        </div>
        
        
        
            <div id="start_div" style="display:none">
                2022/8/17 11:45:14
            </div>
            <div>
                Blog up for <span class="odometer" id="runtime_days" ></span> days <span class="odometer" id="runtime_hours"></span> hrs <span class="odometer" id="runtime_minutes"></span> Min <span class="odometer" id="runtime_seconds"></span> Sec
            </div>
        
        
        
            <script async data-pjax>
                try {
                    function odometer_init() {
                    const elements = document.querySelectorAll('.odometer');
                    elements.forEach(el => {
                        new Odometer({
                            el,
                            format: '( ddd).dd',
                            duration: 200
                        });
                    });
                    }
                    odometer_init();
                } catch (error) {}
            </script>
        
        
        
    </div>  
</footer>
        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="article-tools-list">
        <!-- TOC aside toggle -->
        
            <li class="right-bottom-tools page-aside-toggle">
                <i class="fa-regular fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
            <li class="go-comment">
                <i class="fa-regular fa-comments"></i>
            </li>
        
    </ul>
</div>

        </div>
    

    <div class="right-side-tools-container">
        <div class="side-tools-container">
    <ul class="hidden-tools-list">
        <li class="right-bottom-tools tool-font-adjust-plus flex-center">
            <i class="fa-regular fa-magnifying-glass-plus"></i>
        </li>

        <li class="right-bottom-tools tool-font-adjust-minus flex-center">
            <i class="fa-regular fa-magnifying-glass-minus"></i>
        </li>

        <li class="right-bottom-tools tool-expand-width flex-center">
            <i class="fa-regular fa-expand"></i>
        </li>

        <li class="right-bottom-tools tool-dark-light-toggle flex-center">
            <i class="fa-regular fa-moon"></i>
        </li>

        <!-- rss -->
        

        

        <li class="right-bottom-tools tool-scroll-to-bottom flex-center">
            <i class="fa-regular fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="visible-tools-list">
        <li class="right-bottom-tools toggle-tools-list flex-center">
            <i class="fa-regular fa-cog fa-spin"></i>
        </li>
        
            <li class="right-bottom-tools tool-scroll-to-top flex-center">
                <i class="arrow-up fas fa-arrow-up"></i>
                <span class="percent"></span>
            </li>
        
        
    </ul>
</div>

    </div>

    <div class="image-viewer-container">
    <img src="">
</div>


    


</main>




<script src="/js/utils.js"></script>

<script src="/js/main.js"></script>

<script src="/js/layouts/navbarShrink.js"></script>

<script src="/js/tools/scrollTopBottom.js"></script>

<script src="/js/tools/lightDarkSwitch.js"></script>





    
<script src="/js/tools/codeBlock.js"></script>




    
<script src="/js/layouts/lazyload.js"></script>




    
<script src="/js/tools/runtime.js"></script>

    
<script src="/js/layouts/odometer.min.js"></script>

    
<link rel="stylesheet" href="/assets/odometer-theme-minimal.css">




  
<script src="/js/libs/Typed.min.js"></script>

  
<script src="/js/plugins/typed.js"></script>







<div class="post-scripts pjax">
    
        
<script src="/js/tools/tocToggle.js"></script>

<script src="/js/libs/anime.min.js"></script>

<script src="/js/layouts/toc.js"></script>

<script src="/js/plugins/tabs.js"></script>

    
</div>


    
<script src="/js/libs/pjax.min.js"></script>

<script>
    window.addEventListener('DOMContentLoaded', () => {
        window.pjax = new Pjax({
            selectors: [
                'head title',
                '.page-container',
                '.pjax',
            ],
            history: true,
            debug: false,
            cacheBust: false,
            timeout: 0,
            analytics: false,
            currentUrlFullReload: false,
            scrollRestoration: false,
            // scrollTo: true,
        });

        document.addEventListener('pjax:send', () => {
            Global.utils.pjaxProgressBarStart();
        });

        document.addEventListener('pjax:complete', () => {
            Global.utils.pjaxProgressBarEnd();
            window.pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
            Global.refresh();
        });
    });
</script>




</body>
</html>
